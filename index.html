<!--
  Hey, Pit players! This is the un-obfuscated source code for brookeafk.com.
  Please feel free to ask me questions at https://discord.gg/nuUms8r9Ke or brooke-gill on GitHub.
-->

  <!DOCTYPE HTML>
  <html>
  
  <head>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
    <meta id="viewport" name="viewport" content="initial-scale=1, user-scalable=0, minimum-scale=1">
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>
    <link rel="apple-touch-icon" sizes="180x180" href="favicon_icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon_icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon_icons/favicon-16x16.png">
    <link rel="manifest" href="favicon_icons/site.webmanifest">
    <link rel="shortcut icon" type="image/x-icon" href="favicon_icons/favicon.ico">
    <title>Hypixel Pit Events Tracker - brookeafk.com</title>
    <script src="emergency.js?v=24"></script>
    <script src="control.js?v=24"></script>
    <meta name="theme-color" content="#ffbbff">
    <meta name="description" content="This site allows you to view the upcoming events in the Hypixel Pit in real time."> 
    <meta name="keywords" content="Hypixel Pit, Hypixel, Hypixel Pit Events Tracker, Pit Events, BrookeAFK, Pit, brookeafk.com">
  </head>
  
  <body background-color="black" class="unselectable">
    <div id="wrapper">
  
    <div id="current-event" style="position: absolute; top: 35px; font-size: 25px; width: 475px; word-wrap: break-word; left: 35%; vertical-align: middle; padding: 1px; display: none;" class="flashtext unselectable" align="center"></div>
  
  
    <div><p class="topcontainer"><img src="./3457688aa57c4d71ab9d22b04f9160db.png" width="20" style="position: relative; bottom: 4px;" id="face"><span id="facebreak">&nbsp;</span><span class="wordmark w600" id="brookeafk-com">brookeafk.com</span><span class="mobilebreak">&nbsp;&nbsp;</span><span id="settings" onclick="SettingsMenu()" class="hand_cursor icon">Settings</span>&nbsp;<span id="help" onclick="Help()" class="hand_cursor icon">Help</span></p>
    </div>

    <noscript style="font-size: 80px; color: #ce1010"><b>JavaScript is disabled. This site can't function without it.</b></noscript>

    

    <div style="background: linear-gradient(90deg, rgba(219,10,240,1) 0%, rgba(173,18,122,1) 100%); padding: 15px; position: relative; top: -55px; z-index: 5" onclick="iGetIt()" id="newsite"><b>HEY!</b> To celebrate brookeafk.com's one-year anniversary, I've fixed a bunch of stuff (notifications should work now!) and made the site look a lot prettier with icons and gradients! If you don't like it, you can go back to the old design by <a style="color: #ccc; cursor: pointer;" href="2022"><u>clicking here</u></a>. (Dismiss this announcement by clicking anywhere else on it.)<div style="width: 100%; background-color: #FFFFFF80; height: 5px; position: relative; top: 5px;" id="dismissalprogress"></div></div>
  
    <div id="day-night-border" class="timers dnb"><div id="day-night" style="vertical-align: middle; display: table-cell;" align="center">00:00&nbsp;</div><svg id="day-svg"  xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF"><path d="M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0 c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2 c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1 C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06 c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41 l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41 c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36 c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg>&nbsp; &mdash; &nbsp;<span id="maprot" class="hand_cursor" onclick="mapClick()"></span></div>
<span class="mobilebreak" id="current-event-mobilebreak"></span>
<div class="mobileanno" id="mobileanno" style="display: none"></div>
    
  <div id="settings-section"><br>
  <p class="option"><span class="settingsheader">&mdash; Style &mdash;</span></p>
  <p class="option"><span><b>Theme</b>: </span><span id="settings-theme-dark" onclick='changeTheme("dark")'>Dark</span><span> / </span><span id="settings-theme-light" onclick='changeTheme("light")'>Light</span></p> 
  <p class="option"><span><b>Palette</b>: </span><span id="settings-palette-gradients0" onclick="changePalette('gradients0')" class="hand_cursor">Gradient</span> <span id="settings-palette-gradients1" onclick="changePalette('gradients1')" class="hand_cursor">(alt)</span> / <span id="settings-palette-0" onclick='changePalette(0)' class="hand_cursor">Theme 0</span> / <span id="settings-palette-1" onclick='changePalette(1)' class="hand_cursor">Theme 1</span> / <span id="settings-palette-2" onclick='changePalette(2)' class="hand_cursor">Theme 2</span> / <span id="settings-palette-3" onclick='changePalette(3)' class="hand_cursor">Theme 3</span></p>
  <p class="option"><span><b>Font</b>: </span><span id="settings-font-default" class="hand_cursor" onclick='changeFont("Inter")'>Default</span><span> / <span id="settings-font-minecraft" class="hand_cursor" onclick='changeFont("minecraft")'>Minecraft</span><span> / </span><span id="settings-font-sans-serif" class="hand_cursor" onclick='changeFont("sans-serif")'>Sans-serif</span></p> 
  <p class="option"><span><b>Icons</b>: </span><span id="settings-icons-on" class="hand_cursor" onclick='changeIcons(1)'>On</span><span> / <span id="settings-icons-off" class="hand_cursor" onclick='changeIcons(0)'>Off</span></p> 
  <p class="option"><span><b>Tab timer</b>: </span><span id="settings-tabtimer-on" class="hand_cursor" onclick='changeTabTimer(1)'>On</span><span> / <span id="settings-tabtimer-off" class="hand_cursor" onclick='changeTabTimer(0)'>Off</span></p>
  <p class="option"><span><b>Major event effects</b>: </span><span id="settings-majorstyle-border" class="hand_cursor" onclick='changeMajorStyle("border", "toggle")'>Border</span><span> / <span id="settings-majorstyle-shadow" class="hand_cursor" onclick='changeMajorStyle("shadow", "toggle")'>Shadow</span></p>
  <p class="option"><span><b>Event spacing</b>: </span><span id="settings-spacing-5" class="hand_cursor" onclick='changeSpacing(5)'>Big</span><span> / <span id="settings-spacing-3" class="hand_cursor" onclick='changeSpacing(3)'>Small</span> / <span id="settings-spacing-0" class="hand_cursor" onclick='changeSpacing(0)'>None</span></p>


  <p class="option"><span class="settingsheader">&mdash; Quality of Life &mdash;</span></p>
  <p class="option"><span id="tut-notif" style="color: #ffff80"><b>Pre-event notifications</b></span><span>: </span><span id="settings-audio"><span id="audio-300" onclick='SetAudio(300);' class="hand_cursor">5m</span><span> / </span><span id="audio-180" onclick='SetAudio(180);' class="hand_cursor">3m</span><span> / </span><span id="audio-60" onclick='SetAudio(60);' class="hand_cursor">1m</span><span> / </span><span id="audio-0" onclick='SetAudio(-10);' class="hand_cursor">Never</span></span></p>
  <p id="anotif" class="option"><span>&bullet; <b>Audio notifications</b>: </span><span id="desktop-notifs"><span id="audio-on" onclick='ANotif(1);' class="hand_cursor">On</span><span> / </span><span id="audio-off" onclick='ANotif(0);' class="hand_cursor">Off</span></span></p>
  <p id="dnotif" class="option"><span>&bullet; <b>Desktop notifications</b>: </span><span id="desktop-notifs"><span id="desktop-on" onclick='DNotif(1);' class="hand_cursor">On</span><span> / </span><span id="desktop-off" onclick='DNotif(0);' class="hand_cursor">Off</span></span></p>
  <p class="option"><span id="alert-nobells" style="color: #ff7777; display: none">You're not being reminded for any events!<br>Click the bells in the top-right corner to receive notifications.</span></p>
  <p class="option"><span id="alert-notypes" style="color: #ff7777; display: none">Make sure to turn either "Audio notifications"<br>or "Desktop notifications" on to receive alerts.</span></p>
  <p class="option"><span><b>Timestamps</b>: </span><span id="settings-ts-tod" onclick='setTimestamps("tod");' class="hand_cursor">Time of Day</span><span> / </span><span id="settings-ts-tue" onclick='setTimestamps("tue");' class="hand_cursor">Time Until Event</span> / <span id="settings-ts-dnc" onclick='setTimestamps("dnc");' class="hand_cursor">Day and Map</span></p>
  <p class="option" id="setting-clock-style"><span><b>Clock style</b>: </span><span id="settings-clock-24" onclick='changeClock("24");' class="hand_cursor">24-hour</span><span> / </span><span id="settings-clock-12" onclick='changeClock("12");' class="hand_cursor">12-hour</span></p>
  <p class="option"><span id="settings-flashing"><b>Flashing text</b>: </span><span id="settings-flash"><span id="settings-flash-60" onclick='setFlash(60);' class="hand_cursor">60s</span><span> / </span><span id="settings-flash-30" onclick='setFlash(30);' class="hand_cursor">30s</span><span> / </span><span id="settings-flash-10" onclick='setFlash(10);' class="hand_cursor">10s</span><span> / </span><span id="settings-flash-0" onclick='setFlash(-10);' class="hand_cursor">Never</span></span></p>
  <p class="option"><span><b>Event text</b>: </span><span id="settings-classic-off" class="hand_cursor" onclick='changeClassic(0)'>Modern</span><span> / <span id="settings-classic-on" class="hand_cursor" onclick='changeClassic(1)'>Classic</span></p> 
  <p class="option"><span><b>Version</b>: </span><span>New</span><span> / </span><span onclick='window.location = "2022"' style="color: #808080; cursor: pointer">Old</span></p> 


  <div id="notifications-major">
    <div><span id="visible-Pizza" onclick='VisibilityToggle("Pizza")' class="hand_cursor">Pizza</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Pizza" onclick='NotifToggle("Pizza")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-Raffle" onclick='VisibilityToggle("Raffle")' class="hand_cursor">Raffle</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Raffle" onclick='NotifToggle("Raffle")'class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-Squads" onclick='VisibilityToggle("Squads")' class="hand_cursor">Squads</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Squads" onclick='NotifToggle("Squads")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-Blockhead" onclick='VisibilityToggle("Blockhead")' class="hand_cursor">Blockhead</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Blockhead" onclick='NotifToggle("Blockhead")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-Spire" onclick='VisibilityToggle("Spire")' class="hand_cursor">Spire</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Spire" onclick='NotifToggle("Spire")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-Robbery" onclick='VisibilityToggle("Robbery")' class="hand_cursor">Robbery</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Robbery" onclick='NotifToggle("Robbery")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-TeamDeathmatch" onclick='VisibilityToggle("Team Deathmatch")' class="hand_cursor">Team Deathmatch</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-TeamDeathmatch" onclick='NotifToggle("Team Deathmatch")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-RagePit" onclick='VisibilityToggle("Rage Pit")' class="hand_cursor">Rage Pit</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-RagePit" onclick='NotifToggle("Rage Pit")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-Beast" onclick='VisibilityToggle("Beast")' class="hand_cursor">Beast</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Beast" onclick='NotifToggle("Beast")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <br><div id="test-audio" style="color: #ffffff;" onclick='TestAudio()' class="hand_cursor">Preview Audio</div><div id="view-offset" style="color: #fff;" onclick='resetOffset()' class="hand_cursor"></div><div id="select-all" style="color: #ffffff;" onclick='SelectOnly("everything")' class="hand_cursor">Select All</div>
  </div>
  <div id="notifications-minor">
    <div><span id="visible-DragonEgg" onclick='VisibilityToggle("Dragon Egg")' class="hand_cursor">Dragon Egg</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-DragonEgg" onclick='NotifToggle("Dragon Egg")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-KOTH" onclick='VisibilityToggle("KOTH")' class="hand_cursor">KOTH</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-KOTH" onclick='NotifToggle("KOTH")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-KOTL" onclick='VisibilityToggle("KOTL")' class="hand_cursor">KOTL</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-KOTL" onclick='NotifToggle("KOTL")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-2xRewards" onclick='VisibilityToggle("2x Rewards")' class="hand_cursor">2x Rewards</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-2xRewards" onclick='NotifToggle("2x Rewards")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-CarePackage" onclick='VisibilityToggle("Care Package")' class="hand_cursor">Care Package</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-CarePackage" onclick='NotifToggle("Care Package")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-Auction" onclick='VisibilityToggle("Auction")' class="hand_cursor">Auction</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Auction" onclick='NotifToggle("Auction")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-QuickMaths" onclick='VisibilityToggle("Quick Maths")' class="hand_cursor">Quick Maths</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-QuickMaths" onclick='NotifToggle("Quick Maths")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-GiantCake" onclick='VisibilityToggle("Giant Cake")' class="hand_cursor">Giant Cake</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-GiantCake" onclick='NotifToggle("Giant Cake")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-Allbounty" onclick='VisibilityToggle("All bounty")' class="hand_cursor">All bounty</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Allbounty" onclick='NotifToggle("All bounty")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <br><div id="select-major" style="color: #fff;" onclick='SelectOnly("major")' class="hand_cursor">Majors Only</div>
    <div id="select-minor" style="color: #fff;" onclick='SelectOnly("minor")' class="hand_cursor">Minors Only</div>
    <div id="select-none" style="color: #f77;" onclick='SelectOnly("nothing")' class="hand_cursor">Deselect All</div>
    <br><div id="save" style="color: #aac;" onclick='SaveSettings()' class="hand_cursor"><i>Settings save<br> automatically!</i></div><div id="save" style="color: #f77;" onclick="SaveSettings('clear')" class="hand_cursor">Clear Settings</div><div id="settings-clear-literally-everything" style="color: #b35151; display: none;" onclick="SaveSettings('cleareverything')" class="hand_cursor"><b>Clear Settings and URL</b></div>
  
  </div>

  </div>

  <p class="option"><span id="alert-noevents" style="color: #ff7777; display: none; text-align: center;"><br>You don't have any events selected!<br>Click the <span style="font-family: Material">settings</span> gear to open the settings. Then, click the event names in the top-right corner to make some visible.<br>Alternatively, click <span onclick="SelectOnly('everything')" style="cursor: pointer; color: #ae4e8e">here</span> to select all events.</span></p>
  <span id="noevents" class="bigtext"></span>
  <span id="events"></span>

  <hr>

  <span class="credits">
    <p id="madewithlove">Made with love and tears by <a href="https://brookie.dev" target="_blank" rel="noopener">BrookeAFK</a><span id="mcpqndq"> with help from <a href="https://pitpanda.rocks" target="_blank" rel="noopener">McPqndq</a></p>
    <p id="wikiad"><a href="https://pit.wiki" target="_blank" rel="noopener noreferrer"><span style="color: #ae55c3; font-weight: 600">Check out the <span style="color: #da85a7">Hypixel Pit Wiki</span></a>!</p>
    <p id="special_thanks"></p>
    <p id="version" class="ver"></p> <span>&mdash; April 14, 2023</span>
    <p id="help">Need help using this site? Join the <a href="https://discord.gg/nuUms8r9Ke" target="_blank">Pit Resource Support Discord Server</a>.
    </span>
  </span>
</div>

  <script>
  console.log("The site has loaded.")

  var HiddenEventCount = 0; // number of hidden events
  var EventsToLoad = 1; // number of events in the JSON. this is used a LOT!
  var version_number = `v1.0.0`
  var counter = 4; // counter that counts up every 40ms
  var settingsOpened = false; // self explanatory
  var mapClicked = false; // whether the user's clicked the map timer to show its spooky extended info
  var NormalText = "#000000"; // what colour text should be
  var EventFlashSec = 60; // how many seconds events flash before starting
  var NotifTimer = -10;
  var DoesStuffExist = false; // if things are loaded and it's safe to start querying event <div>s
  var HasStuffLoaded = false; // an even more strict version of DoesStuffExist.
  var currentTime; // the current unix timestamp
  var Palette = 'gradients0'; // current palette. not sure why it's capitalized. really ought to change it sometime
  var SettingsSelectedEvents = 262143; // binary array of user's selected events (in decimal). sorry
  var SettingsNotifyEvents = 0; // same as above but for events that the user's getting notified for
  var SettingsDesktopNotifs = 0;
  var SettingsAudioNotifs = 0;
  var CorrectFont = "Inter";
  var CorrectBold = "Inter";
  var svgDaytime = ""; // used to change the day/night SVG when the time of day changes
  var iconsVisible = 1; // whether the user has icons enabled
  var tabTimerVisible = 1; // whether the user has the tab timer on
  var classicMode = 0; // whether the user uses the older timestamps for the site
  var clockStyle = 24; // number of hours in a day if you're strange and American
  var noevents = false; // if there's no events
  var offset = 0; // offset, in minutes, of a person's clock. useful for people with really weird OSes that can't set their clocks for some reason
  var samplemaprotation = 1661832000; // used for the map rotation timer. stolen from pit.wiki
  var maps = ["Genesis","Corals","Castle","Elements","Four Seasons"] // for map rotation
  var mapid = 0; // id of the current map
  var majorStyles = [1, 1] // whether the major event border and shadow distinguisher are visible
  var spacingPx = 5; // spacing between each event in CSS pixels
  var playedNotifications = []; // array of all event IDs of played notifications. [0] is 1-minute, [1] is 3-minute, [2] is 5-minute. in the future. when i'm not busy

  document.body.style.fontFamily = CorrectFont;
  document.getElementById('version').innerHTML = version_number;

  var time1 = 0; // time since last desktop notif
  
  var theme = "dark";
  var showEventToD = true; //Time of Day
  var showEventTuE = true; //Time until Event
  var showEventDNC = true; //Day-night cycle and map timer
  var VisibleEvents = ["Quick Maths","Dragon Egg","2x Rewards","Care Package","KOTL","KOTH","Auction","Giant Cake","All bounty","Squads","Beast","Pizza","Rage Pit","Spire","Robbery","Blockhead","Raffle","Team Deathmatch"];
  var AudioEvents = [];
  var visibleEventIds = []; // list of event IDs that are currently visible

  var praise_quotes = [`You're crazy.`,"So good brooke.","Cool but seek help please","Brookeafk.com so good","she's insane in the head","brooke your so smart in my opnion","brooke is such a good pit player","your site is incredible","this is actually amazing wtf","brooke is awesome","great site, I get to see every event I love happen while I'm at school!","omg brooke i am so big fan of u hi","ty for ur amazing website &#10084;","best pit website","the site looks good.","brooke is poger","i lvoe bgorokecrazfft.com",`v1.0.0 on feb 27... i mean feb 28... i mean march 11.. i mean march 12... i mean march 13.... nono i mean i mean april 14`,"Your website is quite useful actually","wow this is such a good website i love brookeafk.","brooke is so talented","The storm in my heart clears when I open the brookeafk website","the site looks very cool btw","Brooke is one of the smartest, kindest, most talented people I have ever met. She is not holding me at gunpoint to say this.",`BrookeAFK.com fixed my marriage!`]
  var praise_names = ["Andrew","Ellie","oSnapL","1Mad","Emma","catweapon","Twen","C4PS","vnmm","Vermasium","Stampy_fan2","swux","TheSKYeagle","julikabum","McPqndq","clouby","Brano","Ticha","Working","SAVANN4H","IDAKOI","faelicia","litphoenix","adjective",`anoxysm`]
  var praise_urls = ["http://deviantart.com/hextant","https://twitter.com/ellwixd","https://twitter.com/oSnapLLL","https://youtu.be/dQw4w9WgXcQ","https://twitter.com/cutekitty271","https://namemc.com/profile/354aa68a43694ba29ff23c705dfc11e6","https://twitter.com/KinderFissa","https://twitter.com/c4pshypixel","https://vnmm.dev/","https://namemc.com/profile/9f65cdd1-81d7-49f3-8d41-fef76a7a8768","https://hypixel.net/members/probot.1901786/","https://www.tiktok.com/@swuxify_","https://twitter.com/leskyeagle","https://twitter.com/julikabum_0","https://pitpanda.rocks","https://brookeafk.com","https://twitter.com/branodon","https://pitpanda.rocks/players/18fe5844ce244d11ad3435c96435900f","https://twitter.com/WorkingMC","https://namemc.com/profile/343c717bb51d4dc3a9341d0908ee02e7","https://discord.gg/rebel","https://namemc.com/profile/9a259d6e408742819a2f901a91db9111","https://hypixel.net/members/litphoenix.533148/","https://adjectiven0un.github.io/holeinthewall/",`https://statsify.net/`]
  //jojo was here
  var allSettings = ['visible','notifs','palette','timestamps','theme','flashing','reminder','desktop','audio','font','icons', 'clock', 'classic', 'tabtimer', 'majorstyle', 'spacing'] // all of the settings except for "offset". it's a special case
  var siteLoadSettingValues = Array(allSettings.length); //  list of the user's settings when the site loads.
  var event_sound = new Audio("event_arriving.mp3"); // everyone's favourite jingle
  event_sound.volume = 0.2;
  var ok_ids = []
  var WithoutVar = "";
  var isMapHover = false; // whether the user is hovering over the map timer
  var robot = true; // whether you, the user, are secretly a search engine crawler in disguise!!

  var events = ["Quick Maths","Dragon Egg","2x Rewards","Care Package","KOTL","KOTH","Auction","Giant Cake","All bounty","Squads","Beast","Pizza","Rage Pit","Spire","Robbery","Blockhead","Raffle","Team Deathmatch"] // the important one.
  var eventsNoSpaces = ["QuickMaths","DragonEgg","2xRewards","CarePackage","KOTL","KOTH","Auction","GiantCake","Allbounty","Squads","Beast","Pizza","RagePit","Spire","Robbery","Blockhead","Raffle","TeamDeathmatch"]
  var shortEvents = ["MATH","EGG","2X","CARE","KOTL","KOTH","AUC","CAKE","BNTY","SQD","BST","PZA","RAGE","SPI","ROB","BLK","RAF","TDM"]
  var eventsEmoji = ["🧮", "🐲", "2️⃣\u{FE0F}", "📦", "🪜", "👑", "💵", "🍰", "🪙", "🏳️", "🐻", "🍕", "🥔", "🏯", "💸", "🧱", "🎟️", "🆚"] // for the tab title. i'm not just messing with you... maybe
  var nicknamesen_CA = ["Quick Maths","Dragon Egg","2x Rewards","Care Package","King of the Ladder","King of the Hill","Auction","Giant Cake","Everyone Gets a Bounty","Squads","Beast","Pizza","Rage Pit","Spire","Robbery","Blockhead","Raffle","Team Deathmatch"]
  var pit_wiki_links = ["Quick_Maths","Dragon_Egg","2x_Rewards","Care_Package","King_of_the_Ladder","King_of_the_Hill","Auction","Giant_Cake","Everyone_Gets_a_Bounty","Squads","Beast","Pizza","Rage_Pit","Spire","Robbery","Blockhead","Raffle","Team_Deathmatch"]
  var trueEventColors = ["#FF55FF","#AA00AA","#00AA00","#FFAA00","#55FF55","#55FFFF","#FFFF55","#FF55FF","#FFAA00","#55FFFF","#55FF55","#FF5555","#FF5555","#AA00AA","#FFAA00","#5555FF","#FFAA00","#AA00AA"]
  
  var panicevents = []; // list of events that are red and flashy
  var VisibilityLength = [15,90,240,30,180,240,30,120,15,480,480,480,420,480,420,480,480,480]
  var IsItACountdown = [`<span style="color: #ff55ff"><b>QUICK MATHS!</b></span> <span style="color: #AAAAAA;">First 5 players to answer gain</span> <span style="color: #55ffff;">+250XP</span> <span style="color: #ffaa00;">+500g</span>`,`<span style="color: #ff55ff"><b>MINOR EVENT!</b></span> <span style="color: #aa00aa"><b>DRAGON EGG</b></span><span style="color: #aaaaaa;"> in </span><span style="color: #ffff55"><b>Pit Area</b></span>`,"yes",`<span style="color: #ff55ff"><b>MINOR EVENT!</b></span> <span style="color: #ffaa00"><b>CARE PACKAGE</b></span><span style="color: #aaaaaa;"> in </span><span style="color: #ffff55"><b>Pit Area</b></span>`,"yes","yes",`<span style="color: #ff55ff"><b>MINOR EVENT!</b></span> <span style="color: #ffaa00"><b>AUCTION!</b></span> <span style="color: #AAAAAA">Check auctioneer or chat!</span>`,"yes",`<span style="color: #ff55ff"><b>MINOR EVENT!</b></span> <span style="color: #ffAA00;"><b>EVERYONE GETS A BOUNTY!</b></span>`,"yes","yes","yes","yes","yes","yes","yes","yes","yes"]

  var DemolitionTime = 15;
  var TimeOfEventStart = 0;

  var eventsES = ["Matemáticas Rápidas","Huevo de Dragón","2x Recompensas","Paquete Auxiliar","RDLE","RDLC","Subasta","Tarta Gigante","Recompensa","Escuadrones","Bestia","Pizza","Furia Pit","Chapitel","Robo","Blockhead","Raffle","Deathmatch por Equipos"]
  var IsItACountdownES = [`<span style="color: #ff55ff; font-family: ` + CorrectBold + `;">¡MATEMÁTICAS RÁPIDAS!</span> <span style="color: #AAAAAA;">Los 5 primeros jugadores que respondan recibirán</span> <span style="color: #55ffff;">+250XP</span> <span style="color: #ffaa00;">+500g</span>`,`<span style="color: #ff55ff; font-family: ` + CorrectBold + `;">¡EVENTO MENOR!</span> <span style="color: #aa00aa; font-family: ` + CorrectBold + `;">HUEVO DE DRAGÓN</span><span style="color: #aaaaaa;"> en </span><span style="color: #ffff55; font-family: ` + CorrectBold + `;">Zona de Pit</span>`,"yes",`<span style="color: #ff55ff; font-family: ` + CorrectBold + `;">¡EVENTO MENOR!</span> <span style="color: #ffaa00; font-family: ` + CorrectBold + `;">PAQUETE AUXILIAR</span><span style="color: #aaaaaa;"> en </span><span style="color: #ffff55; font-family: ` + CorrectBold + `;">Zona de Pit</span>`,"yes","yes",`<span style="color: #ff55ff; font-family: ` + CorrectBold + `;">¡EVENTO MENOR!</span> <span style="color: #ffaa00; font-family: ` + CorrectBold + `;">SUBASTA!</span> <span style="color: #AAAAAA; font-family:` + CorrectFont + `">Compruebe el subastador o el chat!</span>`,"yes",`<span style="color: #ff55ff; font-family: ` + CorrectBold + `;">¡EVENTO MENOR!</span> <span style="color: #ffAA00; font-family: ` + CorrectBold + `;"> ¡TODOS RECIBEN UNA RECOMPENSA!</span>`,"yes","yes","yes","yes","yes","yes","yes","yes","yes"]

  var all_text = ["MINOR EVENT!","MAJOR EVENT!","Starting in ","Ending in "]

  /*if(localStorage.getItem("aviduser") == "1") {
    localStorage.removeItem("aviduser");
    localStorage.setItem("reloadChances", "1");
    window.location = "2022";
  }*/

  if(localStorage.getItem('hide-redesign-banner')) document.getElementById('newsite').style.display = 'none';
  function iGetIt() {
    localStorage.setItem('hide-redesign-banner', true);
    document.getElementById('newsite').style.display = 'none';
  }

  function doEverything(unusedVariable) { // this is a "do later" problem!
    return 0;
  }

  if(document.body.clientWidth < 800) { // should make the site mobile when needed
    document.getElementById("settings-ts-tue").innerText = "Until Event"
    document.getElementById("settings-flashing").innerHTML = "<b>Flash: </b>"
    console.log("busy accommodating to the user's hilariously tiny screen")
    document.getElementById("mobileanno").style.display = "";
    document.getElementById("current-event").setAttribute("id","replacement") // swaps the IDs
    document.getElementById("mobileanno").setAttribute("id","current-event")
    document.getElementById("replacement").setAttribute("id","mobileanno")
    var mobilebreaks = document.getElementsByClassName('mobilebreak');
    for (var i = 0; i < mobilebreaks.length; i++) {
      var item = mobilebreaks[i];  
      console.log("one item")
      item.innerHTML = '<br>';
    }
    document.getElementById("current-event").style.width = "90%";
    document.getElementById("mobileanno").style.display = "none";
    document.getElementById("facebreak").innerHTML = "";
    document.getElementById("face").style.display = "none";
  }
  
  document.getElementById('settings').style.color = "NormalText";

  function MakeFunTimestamps(convertible) {
  currentTime = (Date.now() + offset);
  if (convertible - currentTime <= 0) {
    convertible = "Passed!"
  }
  if (convertible - currentTime <= 60000) {
      convertible = (((Math.floor(((convertible - currentTime)*100))/100000).toFixed(2)) + "s");
  } else if (convertible - currentTime <= 3600000) {
      convertible = ((Math.floor(((convertible - currentTime))/60000) + "m" + (classicMode == false?" ":"") + (Math.floor(((convertible - currentTime))/1000) % 60) + "s"));
  } else if (convertible - currentTime > 1) {
      convertible = ((Math.floor(((convertible - currentTime))/3600000) + "h" + (classicMode == false?" ":"") + (Math.floor(((convertible - currentTime))/60000) % 60) + "m"));
  }
  
  return convertible;
  }
  
  function setFlash(seconds) {
    window.EventFlashSec = seconds;
    if(DoesStuffExist == true) {
    for(var i = window.HiddenEventCount; i < EventsToLoad; i++) { 
        document.getElementById('event_'+ String(i)).classList.remove("blinktext-light");
        document.getElementById('event_'+ String(i)).classList.remove("blinktext-dark");
      }
    }
    document.getElementById('settings-flash-60').style.color = "#888888";
    document.getElementById('settings-flash-30').style.color = "#888888";
    document.getElementById('settings-flash-10').style.color = "#888888";
    document.getElementById('settings-flash-0').style.color = "#888888"; 
    if(seconds == 60) document.getElementById('settings-flash-60').style.color = NormalText;
    if(seconds == 30) document.getElementById('settings-flash-30').style.color = NormalText;
    if(seconds == 10) document.getElementById('settings-flash-10').style.color = NormalText;
    if(seconds == -10) document.getElementById('settings-flash-0').style.color = NormalText;
    SaveSettings('noreload');

    panicevents = []; // clears the panic events
    CuteColors(data); // used to remove the red colour from the event
    changeColor(); // prevents eyestrain
  }

  function changeFont(font) {
    if(font != undefined) {
    console.log("A request was just sent to change the font to " + font)
    document.getElementById('settings-font-default').style.color = "#888888";
    document.getElementById('settings-font-sans-serif').style.color = "#888888";
    document.getElementById('settings-font-minecraft').style.color = "#888888";

    if(font == "minecraft") {
      document.getElementById('settings-font-minecraft').style.color = NormalText;
      CorrectFont = "minecraft";
      CorrectBold = "minecraft; font-weight: bold";
      document.getElementById("brookeafk-com").style.fontWeight = "400";
    }
    else {
      document.getElementById("brookeafk-com").style.fontWeight = "600";
      if(font == "sans-serif") {
        document.getElementById('settings-font-sans-serif').style.color = NormalText;
        CorrectFont = "sans-serif";
        CorrectBold = "sans-serif; font-weight: bold";
      }
      if(font == "Inter") {
        document.getElementById('settings-font-default').style.color = NormalText;
        CorrectFont = "Inter";
        CorrectBold = "Inter; font-weight: bold";
      }
    }

    document.body.style.fontFamily = CorrectFont;
    SaveSettings('noreload');
  }
}

  function changeIcons(icons) { // enables and disables the icons
    document.getElementById('settings-icons-on').style.color = "#888888";
    document.getElementById('settings-icons-off').style.color = "#888888";
    iconsVisible = icons;
    if(icons == true) document.getElementById('settings-icons-on').style.color = NormalText;
    else if(icons == false) document.getElementById('settings-icons-off').style.color = NormalText;

    console.log("Icon visibility set to " + iconsVisible);
    addNamesandImages(window.data);
    SaveSettings('noreload');
  }

  function changeTabTimer(tabtimer) { // enables and disables the tab timer
    document.getElementById('settings-tabtimer-on').style.color = "#888888";
    document.getElementById('settings-tabtimer-off').style.color = "#888888";
    tabTimerVisible = tabtimer;
    if(tabtimer == true) document.getElementById('settings-tabtimer-on').style.color = NormalText;
    else if(tabtimer == false) document.getElementById('settings-tabtimer-off').style.color = NormalText;

    console.log("Tab timer visibility set to " + tabTimerVisible);
    addNamesandImages(window.data);
    SaveSettings('noreload');
  }

  function changeClassic(classic) { // makes the text look like how it did in the older version of brookeafk.com
    document.getElementById('settings-classic-on').style.color = "#888888";
    document.getElementById('settings-classic-off').style.color = "#888888";
    classicMode = classic;  

    if(classic == true) document.getElementById('settings-classic-on').style.color = NormalText;
    else if(classic == false) document.getElementById('settings-classic-off').style.color = NormalText;

    console.log("Classic mode is now set to " + classic);
    addNamesandImages(window.data);
    SaveSettings('noreload');
  }

  function changeClock(clock) { // changes the clock from 24-hour "17:40" to 12-hour "5:40 pm" or vice versa
    document.getElementById('settings-clock-24').style.color = "#888888";
    document.getElementById('settings-clock-12').style.color = "#888888";
    clockStyle = clock;
    if(clockStyle == 24) document.getElementById('settings-clock-24').style.color = NormalText;
    else if(clockStyle == 12) document.getElementById('settings-clock-12').style.color = NormalText;

    console.log("The number of hours in a day has been set to " + clock);
    addNamesandImages(window.data);
    SaveSettings('noreload');
  }

  function changeMajorStyle(style, toggle) { // toggles whether the major event border and shadow distinguisher are visible
    
    // toggle's either going to be "toggle" or a number.
    if(style == "border") styleId = 0; 
    if(style == "shadow") styleId = 1;

    if(toggle == "toggle") {
    if(majorStyles[styleId] == true) {
      document.getElementById('settings-majorstyle-' + style).style.color = "#888888";
      majorStyles[styleId] = 0;
    } else {
      document.getElementById('settings-majorstyle-' + style).style.color = NormalText;
      majorStyles[styleId] = 1;
    }
  } else {
    console.log("toggle isn't 'toggle', it's " + toggle)
      majorStyles[styleId] = toggle;
      if(majorStyles[styleId] == true) document.getElementById('settings-majorstyle-' + style).style.color = NormalText;
      else document.getElementById('settings-majorstyle-' + style).style.color = "#888888";
    }

    console.log("Major event styles have been set to: " + majorStyles);
    addNamesandImages(window.data);
    CuteColors(window.data);
    SaveSettings('noreload');
  }

  function changeSpacing(space) { // changes the spacing between events
    document.getElementById('settings-spacing-0').style.color = "#888888";
    document.getElementById('settings-spacing-3').style.color = "#888888";
    document.getElementById('settings-spacing-5').style.color = "#888888";

    var allEvents = document.getElementsByClassName('event');
      for (var i = 0; i < allEvents.length; i++) {
        allEvents[i].style.margin = space + "px";
    }
    spacingPx = space;

    document.getElementById('settings-spacing-' + space).style.color = NormalText;

    console.log("Spacing has been set to " + majorStyles + " px");
    SaveSettings('noreload');
  }
  
  function DayNightCycle() { // i finally optimized it!
    currentTime = Date.now()  + offset;
    let DayTime = ((currentTime + 10000) % 2160000)/1000; //10-second offset
    if(DayTime < 1440) {
      document.getElementById("day-night").innerHTML = (AboutMe((1440 - DayTime)*1000) + "&nbsp;");
      if(svgDaytime = "night") document.getElementById('day-svg').innerHTML = `<path d="M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0 c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2 c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1 C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06 c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41 l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41 c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36 c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/>`
      svgDaytime = "day";
  
  } else {
      //console.log("The night ends in " + (2160 - DayTime) + " seconds.")
      document.getElementById("day-night").innerHTML = (AboutMe((2160 - DayTime)*1000) + "&nbsp;");
      if(svgDaytime = "day") document.getElementById('day-svg').innerHTML = `<path d="M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36c-0.98,1.37-2.58,2.26-4.4,2.26 c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/>`
      svgDaytime = "night";
  }
  }
  
  function SetAudio(seconds) {
    window.NotifTimer = seconds;
    console.log("Notification timer set to " + NotifTimer + " seconds.")
    document.getElementById('anotif').style.display = "block"
    document.getElementById('dnotif').style.display = "block"
    if(seconds > 0) {
    for(var i = 0; i < 18; i++) {
      if(DoesStuffExist == true) {
      document.getElementById('notif-' + eventsNoSpaces[i]).style.display = "inline";
    }}
    if(window.AudioEvents.length == 0 && HasStuffLoaded == true) {
      console.log(window.AudioEvents + " audioevents")
    document.getElementById('alert-nobells').style.display = "block";
      }
    if(SettingsDesktopNotifs == 0 && SettingsAudioNotifs == 0) {
      document.getElementById('alert-notypes').style.display = "block"
    }
  }
      document.getElementById('audio-300').style.color = "#888888";
      document.getElementById('audio-180').style.color = "#888888";
      document.getElementById('audio-60').style.color = "#888888";
      document.getElementById('audio-0').style.color = "#888888"; 
    if(seconds == 300) document.getElementById('audio-300').style.color = NormalText;
    if(seconds == 180) document.getElementById('audio-180').style.color = NormalText;
    if(seconds == 60) document.getElementById('audio-60').style.color = NormalText;
    if(seconds <= 0) {
      document.getElementById('audio-0').style.color = NormalText;
      document.getElementById('anotif').style.display = "none"
      document.getElementById('dnotif').style.display = "none"
      document.getElementById('alert-nobells').style.display = "none";
      document.getElementById('alert-notypes').style.display = "none";
      for(var i = 0; i < 18; i++) {
        if(DoesStuffExist == true) {
        document.getElementById('notif-' + eventsNoSpaces[i]).style.display = "none";
      }}
      
    }
  SaveSettings('noreload');
  }

  function ANotif(tog) {
    window.SettingsAudioNotifs = tog;
    console.log("Audio notifications setting: " + tog);
    if(tog == 1) {
      document.getElementById('audio-on').style.color = NormalText;
      document.getElementById('audio-off').style.color = "#888888";
      document.getElementById('alert-notypes').style.display = 'none';
    }
    if(tog == 0) {
      document.getElementById('audio-off').style.color = NormalText;
      document.getElementById('audio-on').style.color = "#888888";
      if(SettingsDesktopNotifs == 0 && NotifTimer > 0) {
        document.getElementById('alert-notypes').style.display = 'block';
      }
    }
    SaveSettings('noreload');
  }


  function DNotif(tog) { //Short for "Desktop Notification" and "toggle"
    window.SettingsDesktopNotifs = tog;
    console.log("Desktop notifications setting: " + tog);
    if(tog == 1) {
      document.getElementById('desktop-on').style.color = NormalText;
      document.getElementById('desktop-off').style.color = "#888888";
      document.getElementById('alert-notypes').style.display = 'none';
                                            if (!("Notification" in window)) {
                                              document.getElementById('desktop-on').innerHTML = "Your browser doesn't support this!"
                                            }
                                            else if (Notification.permission === "denied") {
                                              document.getElementById('desktop-on').innerHTML = "Notifications denied :("
                                              window.SettingsDesktopNotifs = 0;
                                              tog = 0;
                                            }

                                            else if (Notification.permission === "granted") {
                                              console.log("Notifications were already enabled!")
                                            }

                                            else if (Notification.permission !== "denied") {
                                              document.getElementById('desktop-on').innerHTML = "Accept notifications!"
                                              Notification.requestPermission().then(function (permission) {
                                                if (permission === "granted") {
                                                  console.log("Notifications enabled!")
                                                  document.getElementById('desktop-on').innerHTML = "On"
                                                }
                                                else {
                                                  document.getElementById('desktop-on').innerHTML = "Notifications denied :("
                                                  window.SettingsDesktopNotifs = 0;
                                                  tog = 0;
                                                }
                                              });
                                            }
    }
    if(tog == 0) {
      document.getElementById('desktop-off').style.color = NormalText;
      document.getElementById('desktop-on').style.color = "#888888";
      if(SettingsAudioNotifs == 0 && NotifTimer > 0) {
        document.getElementById('alert-notypes').style.display = 'block';
      }
    }
    SaveSettings('noreload');
  }
  
  function TestAudio() { // plays the audio. simple!
    event_sound.play();
    event_sound.currentTime = 0;
  }

  function TimestampIt(sec = 0) { // creates a timestamp (y, d, h, m, s). used for the map rotation timer
      if(sec > 31536000) {
        return Math.floor(sec / 31536000) + "y " + Math.floor((sec % 31536000) / 86400) + "d " + Math.floor((sec % 86400) / 3600) + "h " + Math.floor((sec % 3600) / 60) + "m " + Math.floor(sec % 60) + "s"
      } else if(sec > 86400 /*1 day*/) {
        return Math.floor(sec / 86400) + "d " + Math.floor((sec % 86400) / 3600) + "h " + Math.floor((sec % 3600) / 60) + "m " + Math.floor(sec % 60) + "s"
      } else if(sec > 3600) {
        return Math.floor((sec % 86400) / 3600) + "h " + Math.floor((sec % 3600) / 60) + "m " + Math.floor(sec % 60) + "s"
      } else if(sec > 60) {
        return Math.floor((sec % 3600) / 60) + "m " + Math.floor(sec % 60) + "s"
      } else {
        return Math.floor(sec % 60) + "s"
      }
  }

  function mod(n, m) { // the actual mod operation. why isn't this in vanilla JS
    return ((n % m) + m) % m;
  }

  function mapRotation() { // calculates and updates the map rotation timer
    let CurrentUnix = (Date.now()  + offset) / 1000;
    mapid = Math.floor(mod((samplemaprotation - CurrentUnix), 3024000) / 604800);
    
    if(!mapClicked) document.getElementById('maprot').innerHTML = "<b>" + maps[mod(mapid - 1, 5)] + "</b> in " + TimestampIt(mod((samplemaprotation - CurrentUnix), 604800));
  }

  function mapClick() {
    if(!mapClicked) {
      mapClicked = true;
      document.getElementById('maprot').innerHTML = `<span style="color: #edbe1f"><b><span class="tip">` + maps[mapid] + `<span class="tiptext">The current map.</span></span></b></span> &rarr; <span style="color: #2bbddb"><b><span class="tip">` + maps[mod(mapid - 1, 5)] + `<span class="tiptext">The upcoming map.</span></span></b></span> &rarr; <span style="color: #666"><b>` + maps[mod(mapid - 2, 5)] + `</b></span> &rarr; <span style="color: #666"><b>` + maps[mod(mapid - 3, 5)] + `</b></span> &rarr; <span style="color: #666"><b>` + maps[mod(mapid - 4, 5)];
    } else {
      mapClicked = false;
    }
  }

  function changeDefOver(e) {
    e.target.classList.toggle('opacity-toggle');
  }

  function changeDefOut(e) {
    e.target.classList.toggle('opacity-toggle');
  }
  
  function changeTheme(themecolor) { // changes the theme from dark to light mode (or vice versa)
    window.theme = themecolor;
    console.log ("Changed theme to " + window.theme);
    if(themecolor == "light") {
      NormalText = "#000000";
      document.getElementById('settings-theme-dark').style.color = "#888888";
      document.getElementById('settings-theme-light').style.color = NormalText;
      document.body.style.background = "#FFFFFF";
      document.querySelectorAll('p').forEach(e => e.style.color = "black");
      document.getElementById('settings-theme-dark').classList.add("hand_cursor");
      document.getElementById('settings-theme-light').classList.remove("hand_cursor");
      document.getElementById('settings-palette-0').innerHTML = ("Origins");
      document.getElementById('settings-palette-1').innerHTML = ("Sunset");
      document.getElementById('settings-palette-2').innerHTML = ("Beachside");
      document.getElementById('settings-palette-3').innerHTML = ("Bubblegum");
      document.getElementById('tut-notif').style.color = "#BD8E02"
    } else if (window.theme == "dark") {
      NormalText = "#FFFFFF";
      document.getElementById('settings-theme-light').style.color = "#888888";
      document.getElementById('settings-theme-dark').style.color = NormalText;
      document.body.style.background = "#222222";
      document.querySelectorAll('p').forEach(e => e.style.color = "white");
      document.getElementById('settings-theme-dark').classList.remove("hand_cursor");
      document.getElementById('settings-theme-light').classList.add("hand_cursor");
      document.getElementById('settings-palette-0').innerHTML = ("Origins");
      document.getElementById('settings-palette-1').innerHTML = ("Sunrise");
      document.getElementById('settings-palette-2').innerHTML = ("Ocean");
      document.getElementById('settings-palette-3').innerHTML = ("Business");
      document.getElementById('tut-notif').style.color = "#FFFF80"
    }
    document.documentElement.style.setProperty("--normaltext", NormalText);
    document.getElementById('day-svg').style.fill = NormalText;
    document.getElementById('day-night-border').style.color = NormalText;
    if (DoesStuffExist == true) {
      changeFont(window.font)
      setFlash(window.EventFlashSec);
      SetAudio(window.NotifTimer);
      DNotif(window.SettingsDesktopNotifs);
      ANotif(window.SettingsAudioNotifs);
      changeIcons(window.iconsVisible);
      changeClock(window.clockStyle);
      changeClassic(window.classicMode);
      changeTabTimer(window.tabTimerVisible);
      changeMajorStyle("border", window.majorStyles[0]);
      changeMajorStyle("shadow", window.majorStyles[1]);
      console.log("Stuff exists. Updating event flashes and audio.");
      CuteColors(window.data);
    }
    for(var i = 1; i <= window.eventsNoSpaces.length; i++) {
      if(AudioEvents.includes(events[i - 1])) { //if the event is audible...
        document.getElementById('notif-'+ eventsNoSpaces[i - 1]).style.fill = NormalText;
      } else {
        document.getElementById('notif-'+ eventsNoSpaces[i - 1]).style.fill = "#888888";
      }
    }
    for(var i = 1; i <= window.eventsNoSpaces.length; i++) {	
      if(VisibleEvents.includes(events[i - 1])) { //if the event is visible...	
        document.getElementById('visible-'+ eventsNoSpaces[i - 1]).style.color = NormalText;	
      } else {	
        document.getElementById('visible-'+ eventsNoSpaces[i - 1]).style.color = "#888888";	
      }
    }
    if(themecolor == "light") {
    [...document.querySelectorAll('*')]
      .filter(el => getComputedStyle(el).color === 'rgb(255, 255, 255)')
      .forEach(el => el.style.color = '#000000')
    }
    if(themecolor == "dark") {
    [...document.querySelectorAll('*')]
      .filter(el => getComputedStyle(el).color === 'rgb(0, 0, 0)')
      .forEach(el => el.style.color = '#ffffff')
    }
    if(DoesStuffExist) addNamesandImages(window.data);
    SaveSettings('noreload');
  }
  
  changeTheme(theme); // It's called here to load the events in as black to begin with. I don't want to give people seizures.
  
  function setTimestamps(timestamps, toggler = true) { // shows and hides timestamps. "toggler" is whether the event toggles (i.e. swaps the visibility.)
    if (timestamps == "tod") {
      if((window.showEventToD == false && !toggler) || (window.showEventToD == true && toggler)) {
        document.getElementById('settings-ts-tod').style.color = "#888888";
        document.getElementById('setting-clock-style').style.display = "none";
        window.showEventToD = false;
      } else {
        document.getElementById('settings-ts-tod').style.color = NormalText;
        document.getElementById('setting-clock-style').style.display = "block";
        window.showEventToD = true;
      }
    }
    if (timestamps == "tue") {
      if((window.showEventTuE == false && !toggler) || (window.showEventTuE == true && toggler)) {
        document.getElementById('settings-ts-tue').style.color = "#888888";
        window.showEventTuE = false;
      } else {
        document.getElementById('settings-ts-tue').style.color = NormalText;
        window.showEventTuE = true;
      }
    }
    if (timestamps == "dnc") {
      if((window.showEventDNC == false && !toggler) || (window.showEventDNC == true && toggler)) {
        document.getElementById('settings-ts-dnc').style.color = "#888888";
        window.showEventDNC = false;
        document.getElementById("day-night-border").style.display = "none";
      } else {
        document.getElementById('settings-ts-dnc').style.color = NormalText;
        window.showEventDNC = true;
        document.getElementById("day-night-border").style.display = "";
  
      }
    }
    addNamesandImages(window.data);
    SaveSettings('noreload');
  }
  
  function changePalette(changeThePalette) { // changes the user's palette
    Palette = changeThePalette;
    document.getElementById('settings-palette-gradients0').style.color = "#888888";
    document.getElementById('settings-palette-gradients1').style.color = "#888888";
    document.getElementById('settings-palette-0').style.color = "#888888";
    document.getElementById('settings-palette-1').style.color = "#888888";
    document.getElementById('settings-palette-2').style.color = "#888888";
    document.getElementById('settings-palette-3').style.color = "#888888";
    if(Palette > -100 || Palette == 'gradients0' || Palette == 'gradients1') {
      document.getElementById('settings-palette-' + Palette).style.color = NormalText;
    }

    addNamesandImages(window.data);
    CuteColors(window.data);
    SaveSettings('noreload');
  }
  

  function SelectOnly(event_type) { // allows the user to select certain events, all, or none
    if(event_type == "minor") {
    for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
        if (window.data[i]['type'] == "major") {
        document.getElementById('event_' + String(i)).style.display = "none";
        console.log("Major event hidden.");
        }
        if (window.data[i]['type'] == "minor") {
        document.getElementById('event_' + String(i)).style.display = "block";
        console.log("Minor event made visible.");
        }
        window.VisibleEvents = ["Quick Maths","Dragon Egg","2x Rewards","Care Package","KOTL","KOTH","Auction","Giant Cake","All bounty"];
        SettingsSelectedEvents = 511;
        document.getElementById('alert-noevents').style.display = "none";
      }
    } else if(event_type == "major") {
      for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
        if (window.data[i]['type'] == "minor") {
        document.getElementById('event_' + String(i)).style.display = "none";
        console.log("Minor event hidden.");
        }
        if (window.data[i]['type'] == "major") {
        document.getElementById('event_' + String(i)).style.display = "block";
        console.log("Major event made visible.");
        }
        window.VisibleEvents = ["Squads","Beast","Pizza","Rage Pit","Spire","Robbery","Blockhead","Raffle","Team Deathmatch"];
        SettingsSelectedEvents = 261632;
      }
      document.getElementById('alert-noevents').style.display = "none";
    } else if(event_type == "nothing") {
    window.VisibleEvents = [];
    window.AudioEvents = [];
    SettingsSelectedEvents = 0;
    SettingsNotifyEvents = 0;
    document.getElementById('alert-noevents').style.display = "block"
    if(NotifTimer > 0) {
        document.getElementById('alert-nobells').style.display = "block";
    }
  
    for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
        document.getElementById('event_' + String(i)).style.display = "none";
      }
    } else if(event_type == "everything") {
      window.VisibleEvents = ["Quick Maths","Dragon Egg","2x Rewards","Care Package","KOTL","KOTH","Auction","Giant Cake","All bounty","Squads","Beast","Pizza","Rage Pit","Spire","Robbery","Blockhead","Raffle","Team Deathmatch"]
      SettingsSelectedEvents = 262143;
      for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
        document.getElementById('event_' + String(i)).style.display = "block";
      }
      
      document.getElementById('alert-noevents').style.display = "none";
    }
    changeTheme(theme);
    checkVisibleEvents();
    console.log(SettingsSelectedEvents);
  }
  
  function GeneratePraise() { // generates a quote (used on the bottom of the site)
    const randomElement = [Math.floor(Math.random() * (praise_quotes.length + 4)) - 4]; //adds very slight bias to quote #0
    console.log("Item " + randomElement + " chosen for praise!");
    if(randomElement <= -1) {
      randomElement[0] = 0;
    }
    return (`"` + praise_quotes[randomElement] + `" &mdash; <a href="` + praise_urls[randomElement] + `" target="_blank">` + praise_names[randomElement] + `</a>`);
  }
  
  function TimeOfDay(s) { // gets the local time of day from a Unix timestamp.
    var toffset = (new Date().getTimezoneOffset())*-60000;
    if(clockStyle == 12) {
      var twelvetime = new Date(s + offset);
      var hour = twelvetime.getHours() % 12;
      if(hour == 0) hour = 12;
      var minute = twelvetime.getMinutes();
      return (hour + ":" + prefixZero(minute, 2) + (twelvetime.getHours()>11&&twelvetime.getHours()!=0?" pm":" am"))
    }
    else return new Date(s + toffset + offset).toISOString().slice(-13, -8);
  }

  function autoReload() { if(performance.now() > 43200000 && Math.random() < 0.1) location.reload(); } // automatically reloads the site every twelve hours

  function noEvents() { // if there's no events left, show some text explaining this to the user
    if(HiddenEventCount == EventsToLoad || EventsToLoad == 1) { 
      if(!noevents && counter >= 35) {
        document.getElementById('noevents').innerHTML = `<br><b>Hey, where'd all the events go?</b><br>It looks like the site ran out of events. This shouldn't happen anymore!<br>Try the following things in order:<ul><li>Wait a few seconds.</li><li>Reload the page by using <kbd>Control</kbd> + <kbd>Shift</kbd> + <kbd>R</kbd>.</li><li>Test <a href="https://events.mcpqndq.dev" target="blank">this link</a> to see if the site has any events or text on it. If it doesn't (or if you get an error), the site's down. Contact me using the <a href="https://discord.gg/nuUms8r9Ke" target="_blank">Pit Resource Support Discord server</a> or <a href="https://github.com/brooke-gill">on GitHub</a>.`
        noevents = true;
      } 
    } else {
      document.getElementById('noevents').style.display = "none";
    }
    if(counter >= 1400) iGetIt();
    if(counter <= 1400) document.getElementById("dismissalprogress").style.width = (1 - counter / 1400) * 100 + "%";
  }

  
  var gradients0 = [["db07eb","2a33a1"],["d11db0","990e4f"],["0d9121","b9d29e"],["d79e35","aec839"],["6ec97c","dfe424"],["60d0c8","3574a8"],["d4983a","d4e7a2"],["cb49cd","e3bfe6"],["d28b1a","b03737"],["4f73cf","72c79a"],["3bbd40","b1fb70"],["cc4c4c","ac3ca7"],["991e1e","c26e26"],["9621b8","1f8fa6"],["d5ac1d","dadd38"],["1b57c8","97cae9"],["d7ad17","dae398"],["8617d7","bb167e"]];

  var gradients1 = [["cb7cd1","575c9a"],["c66fb6","99647d"],["479452","b9d29e"],["c49b50","b8c775"],["6ec97c","cfd42b"],["83d2cd","3574a8"],["d5aa66","d4e7a2"],["cd86cf","e3bfe6"],["d4bc55","b56767"],["123456","47c9be"],["146517","b1fb70"],["5e042e","ac3ca7"],["4d1210","d37515"],["510940","1f8fa6"],["bba321","e6e633"],["0b1f47","736cd0"],["a6a239","dae398"],["380960","d06c98"]]; // these ones are awesome but adj won;t let me add them

  //gradients0 = [["b961bb","d5c656"],["8e4f75","5d4c98"],["79d976","239eab"],["ce6a6a","aaaf15"],["4c8374","aaaf15"],["8fb5d5","21966b"],["d2d099","d28419"],["d558b8","f3eff2"],["a25656","4144ab"],["4f73cf","72c79a"],["3bbd40","b1fb70"],["cc4c4c","ac3ca7"],["991e1e","c26e26"],["9621b8","1f8fa6"],["d5ac1d","dadd38"],["1b57c8","97cae9"],["d7ad17","dae398"],["8617d7","bb167e"]];

  //var gradients2 = [["4eb743","12743f"],["d11db0","990e4f"],["0d9121","b9d29e"],["d79e35","aec839"],["6ec97c","dfe424"],["60d0c8","3574a8"],["d4983a","d4e7a2"],["cb49cd","e3bfe6"],["d2b01a","b03737"],["123456","72c79a"],["3bbd40","b1fb70"],["cc4c4c","ac3ca7"],["991e1e","c26e26"],["9621b8","1f8fa6"],["d5ac1d","dadd38"],["1b57c8","97cae9"],["d7ad17","dae398"],["8617d7","bb167e"]];

  var lightColors0 = ["#D9D2E9","#E9D2E1","#D2E9DD","#E9E2D2","#D2E9D2","#D2E9E8","#E9DDD2","#E9D2D2","#E9E3D2","#8EBAEC","#8EEC94","#ECB38E","#EC8E8E","#EC8EEC","#ECE98E","#9191EC","#ECBD8E","#BA8EEC"]
  var darkColors0 = ["#45234f","#4f234d","#234f2c","#4f3023","#394f23","#234f48","#6e5032","#35234f","#4f4d23","#206dc5","#20c541","#c59f20","#c52320","#c520c3","#c5c320","#2323c5","#c0c020","#7320c5"]
  
  var lightColors2 = ["#FFAEBC","#E29CB4","#B4F8C8","#E4D4B4","#F1CBB0","#A0E7E5","#F4F4CC","#C5E3F2","#FBE7C6","#14C2DD","#C7F954","#FCC27C","#FF6F61","#64ABD1","#FDD55E","#5CB7D4","#EEB968","#81599F",]
  var darkColors2 = ["#003A61","#194475","#2E4180","#323275","#0E2F82","#305B8C","#315F82","#196B82","#02636E","#0ACF87","#2CB8AE","#219CD1","#438BDE","#1B96DE","#2BB5BA","#25AACF","#2D82D6","#4BD6B8",]
  var darkColors1 = ["#4F2561","#3D2C5C","#782C91","#8C3A81","#70287D","#504178","#402459","#AB1B7D","#661563","#DE8F10","#FA9E0A","#DB7821","#D19D49","#E84E3C","#E6C853","#ED7C2B","#CF8D32","#D3CD30",] 
  var lightColors1 = ["#F7E497","#E3DC7B","#D9C755","#EBC86A","#F7C997","#EDD368","#F2B583","#EDD09D","#EB8773","#AB419B","#C2619E","#D93FB7","#B83DB3","#E038A3","#C71C60","#D45BA1","#E84179","#E344E0",]
  //var darkColors3 = ["#321433","#33142b","#143321","#332314","#1e3314","#143333","#332a14","#261433","#2f3314","#206dc5","#20c541","#c59f20","#c52320","#c520c3","#c5c320","#2323c5","#c0c020","#7320c5"]
  var lightColors3 = ["#FE9FBF","#F2C4CD","#ffaed7","#F2A2C0","#FF9DBB","#FF92B9","#ECAFB7","#FFC6DA","#FEA8C5","#D98FC5","#BF5AA4","#E68DCF","#E08FCA","#E884CC","#C15BA7","#E78CD1","#DC87BE","#CF6EB1"]
  var darkColors3 = ["#222222","#222222","#222222","#222222","#222222","#222222","#222222","#222222","#222222",'#2A2229','#2A2229','#2A2229','#2A2229','#2A2229','#2A2229','#2A2229','#2A2229','#2A2229',]
  var darkColors4 = ["#222222","#222222","#222222","#222222","#222222","#222222","#222222","#222222","#222222",'#2A2229','#2A2229','#2A2229','#2A2229','#2A2229','#2A2229','#2A2229','#2A2229','#2A2229',]

  var darkColorsVermasium = ["#8095BF","#606BA6","#8095BF","#606BA6","#8095BF","#606BA6","#8095BF","#606BA6","#8095BF","#394066","#394066","#394066","#394066","#394066","#394066","#394066","#394066","#394066"]
  var darkColorsIDAKOI = ["#1B2440","#BF372A","#453561","#65213C","#19213C","#29314C","#101628","#101D2F","#601F39","#D98943","#E9879E","#C54129","#E6C302","#C54129","#C5A510","#D2A829","#B4971E","#D68941"]
  var darkColorsadjective_n0un = ["#808080","#808080","#808080","#808080","#808080","#808080","#808080","#808080","#808080","#55F","#55F","#55F","#55F","#55F","#55F","#55F","#55F","#55F"]
  var darkColorsswuxx = ["#61123e","#000000","#61123e","#000000","#61123e","#61123e","#61123e","#61123e","#61123e","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000"]
  var darkColorsMaleffect = ["#45234f","#4f234d","#234f2c","#4f3023","#394f23","#234f48","#6e5032","#35234f","#4f4d23","#206dc5","#20c541","#c59f20","#c52320","#c520c3","#c5c320","#2323c5","#c0c020","#7320c5"]
  var darkColorslitphoenix = ["#af3d1f","#c76300","#d04200","#c2071b","#9c693a","#862910","#915a22","#b95300","#9c6507","#f6b647","#d0d251","#fe8b8b","#f99026","#fe86aa","#e5c13e","#ff7b42","#d4ae6e","#ff8080"]

    // ["Quick Maths","Dragon Egg","2x Rewards","Care Package",
  // "KOTL","KOTH","Auction","Giant Cake","All bounty",
  // "Squads","Beast","Pizza","Rage Pit","Spire",
  // "Robbery","Blockhead","Raffle","Team Deathmatch"];

  if( typeof emergency === 'undefined'){ // if the connection to control.js failed
    console.log("Wah!")
    emergency = false; // this is essentially the "emergency" for the emergency variable. Ridiculous.
  }
  var pp_url = ""
  console.log(emergency)

  if(emergency == false) {
    pp_url = ('https://events.mcpqndq.dev'); //stands for "Pit Panda"
    console.log("no emergency here!")
  }

  data_backup = MakeAPIAndHTML();
  cycle1();
  cycle5();
  cycle25();
  console.log("The data's been called!");
  setInterval(cycle1, 40);
  setInterval(cycle5, 200);
  setInterval(cycle25, 1000);
  
  async function MakeAPIAndHTML() { //Calls the API exactly once (thanks McPqndq for pointing out that i do not have to call apis more than once)
    if(emergency == true) {
    document.getElementById('version').innerHTML = (version_number + "e");
    document.getElementById('mcpqndq').style.display = "none"; // i'm evil
    window.data = await window.emergency_data;
    /*if(Object.keys(data).length == 0) {
      console.log("oh no")
      emergency = false;
    }*/
    }
    if(emergency == false) {
    const response = await fetch(pp_url);
    window.data = await response.json();
    }
    window.data_backup = window.data;
    window.EventsToLoad = Object.keys(window.data).length
    console.log("Loading events: " + window.EventsToLoad);
    console.log("API Called.")
    for(var i = 0; i < window.EventsToLoad; i += 1) { //Make HTML elements
      var div = document.createElement("div");
      console.log("Made an element.");
      div.id = ("event_" + i);
      div.innerHTML = ("[loading event]");
      div.classList.add('event');
      div.innerHTML = `<span class="timers" id="timer_` + i + `"></span>`;
      document.getElementById('events').appendChild(div);
  }
  document.getElementById('special_thanks').innerHTML = GeneratePraise();
    changeTheme(theme); //just again to make sure 
    //console.log("Seems like your screen's " + document.body.clientWidth + " pixels wide.");
    DoesStuffExist = true;
    URLToSettings();  
    
    addNamesandImages(window.data);
  }
  
  function AudioChecker() {
    currentTime = (Date.now() + offset);
    if (DoesStuffExist == true) {
        for (var i = window.HiddenEventCount; i <= window.HiddenEventCount + 3 && i < EventsToLoad; i++) { //thanks Clipi-12!
            if (window.AudioEvents.includes(window.data[i]['event']) && playedNotifications.indexOf(i) == -1 && (window.data[i]['timestamp'] - currentTime) <= (NotifTimer * 1000)) {
                playedNotifications.push(i);
                if((window.data[i]['timestamp'] - currentTime - NotifTimer * 1000) > -20000) { // if it's been less than 20 seconds since the event notification should've gone off
                  if (SettingsAudioNotifs == 1) {
                      event_sound.play();
                  }
                  if (SettingsDesktopNotifs == 1) {
                      if (Date.now() + offset > time1 + 5) { //if it's been more than 5 seconds since the last notification
                          var notification = new Notification("", {
                              body: "Hey – " + nickname(window.data[i]['event']) + " is starting in " + NotifTimer / 60 + " " + (NotifTimer == 60 ? "minute" : "minutes") + "!",
                              icon: "3457688aa57c4d71ab9d22b04f9160db.png"
                          });
                          time1 = Date.now() + offset;
                      }
                  }
                }
            }
        }
    }
}
  
  function RapidFirst(transformation) { //this plops the stuff in the actual html page
    if (DoesStuffExist == true) {
        HasStuffLoaded = true; //looks like the stuff has loaded
        for(var i = window.HiddenEventCount; i <= window.HiddenEventCount && i < EventsToLoad; i++) {
            if(showEventTuE == true) document.getElementById('timer_' + String(i)).innerHTML = MakeFunTimestamps(transformation[i].timestamp);
            if(MakeFunTimestamps(transformation[i].timestamp) == "Passed!" && !!document.getElementById('event_' + String(i)) == true) { // if the topmost event's timer ran out
                for(var j = 0; j <= i; j++) {
                    document.getElementById('event_' + String(j)).style.display = "none"; // hide it
                }
                window.HiddenEventCount = window.HiddenEventCount + 1;
                DemolitionTime = (window.data[HiddenEventCount - 1]['timestamp'] + (VisibilityLength[events.indexOf(window.data[HiddenEventCount - 1]['event'])]) * 1000) // prepares to make the current event visible, depending on how long it should be visible for
                TimeOfEventStart = Date.now() + offset;

                checkVisibleEvents();
                document.getElementById("current-event").style.display = "block";
                document.getElementById('special_thanks').innerHTML = GeneratePraise(); // updates the praise on the bottom of the site
            }

            currentTime = (Date.now() + offset);
            if ((transformation[i]['timestamp'] - currentTime <= (EventFlashSec * 1000) && (transformation[i]['timestamp'] - currentTime) % 1000 > 900) && (theme == "light" || theme == "dark")) {

                document.getElementById('event_' + String(i)).classList.remove("blinktext-light");
                document.getElementById('event_' + String(i)).classList.remove("blinktext-dark");
                document.getElementById('event_' + String(i)).classList.add("blinktext-" + theme);
                changeColor();
            }
        }
    }
}


  document.getElementById('brookeafk-com').addEventListener('animationend', function(e) { // literally just makes the logo do awesome flips when you hover on it. this is the best feature of the website
    document.getElementById('brookeafk-com').classList.remove('animated');
    document.querySelector(':root').style.setProperty('--xrot', (Math.random() - 0.5) * 1);
    document.querySelector(':root').style.setProperty('--yrot', (Math.random() - 0.5) * 1);
    document.querySelector(':root').style.setProperty('--zrot', (Math.random() - 0.5) * 1);
  });

  document.getElementById('brookeafk-com').addEventListener('mouseover', function(e) {
    document.getElementById('brookeafk-com').classList.add('animated');
  });

  function changeColor() { // changes the color of the top item when time's running out (as described in setFlash or something)
    currentTime = (Date.now() + offset);
    timeleft = window.data[HiddenEventCount]['timestamp'] - currentTime;

    if(timeleft < EventFlashSec * 1000 && panicevents.indexOf(HiddenEventCount) == -1) {
      document.getElementById('event_' + HiddenEventCount).style.background = "linear-gradient(120deg, rgb(240, 40, 20) 0%, rgb(100, 60, 36) 100%)";
      if(counter >= 20) panicevents.push(HiddenEventCount);
    }
  }

  function flipEvents(g) { // makes the events flip when you load the page
    g = g - 10; // adds a delay to prevent the site from trying to flip events while things are loading (bad!)

    if(g >= 0 && g <= 200 && visibleEventIds[g] != undefined)
    if((g != 0 || (data[visibleEventIds[0]].timestamp - Date.now()) > (EventFlashSec * 1000))) {
      document.getElementById('event_' + (visibleEventIds[g])).classList.add("flip");
    } 
    if(g >= 25 && document.getElementById('event_' + (g - 25)) != null) document.getElementById('event_' + (g - 25)).classList.remove("flip");
  }
  
  function UpdateEverything(transformation) { // this plops the stuff in the actual html page
    for(var i = window.HiddenEventCount + 1; i < EventsToLoad; i++) {
      if(showEventTuE == true) document.getElementById('timer_' + String(i)).innerHTML = MakeFunTimestamps(transformation[i].timestamp);
    if(MakeFunTimestamps(transformation[i].timestamp) == "Passed!" && !!document.getElementById('event_' + String(i)) == true) { //in an ideal world this should NEVER be called but js can be weird as hell sometimes
      document.getElementById('timer_' + String(i)).style.display = "none";
      window.HiddenEventCount = window.HiddenEventCount + 1; 
      console.log("hey if you see this please let Brooke know as this should Not happen lol");
    }
  }
  }

  function resetOffset() { // resets the offset, then reloads the page
    localStorage.setItem('offset', 0);
    let here = new URL(window.location.href);
    here.searchParams.delete("offset"); // deletes offset from URL and localStorage
    window.location = here;
  }
  
  function VisibilityToggle(toggle) {
    if (window.VisibleEvents.includes(toggle)) {
      SettingsSelectedEvents = (SettingsSelectedEvents - Math.pow(2, window.events.indexOf(toggle)));
      const index = window.VisibleEvents.indexOf(toggle);
      if (index > -1) {
        window.VisibleEvents.splice(index, 1);
        document.getElementById('visible-' + toggle.replace(/\s/g, '')).style.color = "#888888";
      }
      for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
      if (window.data[i]["event"].includes(toggle)) {
        document.getElementById('event_' + String(i)).style.display = "none";
      }
      if(VisibleEvents.length == 0) {
    document.getElementById('alert-noevents').style.display = "block";
      }
    }
    } else {
      window.VisibleEvents.push(toggle);
      document.getElementById('visible-' + toggle.replace(/\s/g, '')).style.color = NormalText;
      SettingsSelectedEvents = (SettingsSelectedEvents + Math.pow(2, window.events.indexOf(toggle)));
      for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
      if (window.data[i]["event"].includes(toggle)) {
        document.getElementById('event_' + String(i)).style.display = "block";
      }
      }
      document.getElementById('alert-noevents').style.display = "none";

    }
    console.log("List of events that are visible:")
    console.log(window.VisibleEvents);
    checkVisibleEvents();
    SaveSettings('noreload');
  }

  function getSettings() { // scrapes both URLs and localStorage for settings. URLs get top priority.
    var defaultSettings = ['262143', '262143', 'gradients0', '111', 'dark', '60', '-10', '0', '0', '0', '1', '24', '0', '1', '11', '5']
    // 'visible','notifs','palette','timestamps','theme','flashing','reminder','desktop','audio','font','icons', 'clock', 'classic', 'tabtimer', 'majorstyle', 'spacing'
    var site_url = new URL(window.location.href);
    var settingValues = Array(allSettings.length);

    for(h = 0; h < allSettings.length; h++) {
      if(site_url.searchParams.get(allSettings[h]) == null) {
        if(localStorage.getItem(allSettings[h]) == null) {
          console.log("no setting found for " + allSettings[h] + " :(");
          settingValues[h] = defaultSettings[h];
        } else {
          console.log("setting for " + allSettings[h] + " found in the local storage");
          settingValues[h] = localStorage.getItem(allSettings[h]);
        }
      } else {
        console.log("setting for " + allSettings[h] + " found in the URL!");
        settingValues[h] = site_url.searchParams.get(allSettings[h]);
        document.getElementById("settings-clear-literally-everything").style.display = "";
      }
    }
    if(site_url.searchParams.get("2022") != null) document.getElementById("settings-clear-literally-everything").style.display = "";
    return settingValues;
  }

  function checkVisibleEvents() { // returns an array with IDs of visible events
    visibleEventIds = [];
    for(a = 0; a < EventsToLoad; a++) {
      if(document.getElementById('event_' + a).style.display != "none") visibleEventIds.push(a);
    }
  }

  function isRobot() {
    if (new RegExp("bot|google|baidu|bing|msn|teoma|slurp|yandex", 'i').test(navigator.userAgent)) return true; // list of robots
    else return false; 
  }
  robot = isRobot();

  function updateTabTimer() { // updates the timer in the tab
    if(DoesStuffExist && visibleEventIds.length > 0 && !robot && tabTimerVisible == true) { // if events are real, at least one event is visible, you're not a robot (so it doesn't appear in search engines), and the user has the tab timer setting on. phew
      var firstIndex = events.indexOf(data[visibleEventIds[0]]['event']);
      document.title = "[" + eventsEmoji[firstIndex] + " " +  shortEvents[firstIndex] + " " + MakeFunTimestamps(data[visibleEventIds[0]]['timestamp']) + "] | Hypixel Pit Events Tracker";
    } else {
      document.title = "Hypixel Pit Events Tracker - brookeafk.com";
    }
  }
  
  function URLToSettings() {
      siteLoadSettingValues = getSettings();

      let here = new URL(window.location.href);
      if(here.searchParams.get('offset') !== null) {
        offset = here.searchParams.get('offset') * 60000;
        localStorage.setItem('offset', here.searchParams.get('offset'));
      }
      if(localStorage.getItem('offset') !== null) offset = localStorage.getItem('offset') * 60000;

      if(offset != 0) document.getElementById('view-offset').innerHTML = "Offset set to <b>" + Math.floor(offset / 60000) + "</b> minutes &mdash; Click here to reset";
      else document.getElementById('view-offset').innerHTML = "<br>"

          // 'visible','notifs','palette','timestamps','theme','flashing','reminder','desktop','audio','font','icons', 'clock'
      CorrectFont = siteLoadSettingValues[9];
      console.log("CORRECT FONT VALUE: " + CorrectFont);
      if (CorrectFont == '0') CorrectFont = 'Inter'
      else if(CorrectFont == '1') CorrectFont = 'sans-serif';
      else if(CorrectFont == '2') CorrectFont = 'minecraft';
      else CorrectFont = "Inter"; // what on earth happened for this code to run

      NotifTimer = siteLoadSettingValues[6];
      EventFlashSec = siteLoadSettingValues[5];
      Palette = siteLoadSettingValues[2];
      theme = siteLoadSettingValues[4];
      showEventToD = siteLoadSettingValues[3].charAt(0); //first character of "timestamps" in URL
      showEventTuE = siteLoadSettingValues[3].charAt(1);
      showEventDNC = siteLoadSettingValues[3].charAt(2);
      if (showEventDNC == false) {
        document.getElementById("day-night-border").style.display = "none";
      }
      SettingsSelectedEvents = parseInt(siteLoadSettingValues[0]);
      SettingsNotifyEvents = parseInt(siteLoadSettingValues[1]);
      SettingsDesktopNotifs = parseInt(siteLoadSettingValues[7]);
      SettingsAudioNotifs = parseInt(siteLoadSettingValues[8]);
      iconsVisible = parseInt(siteLoadSettingValues[10]);
      clockStyle = parseInt(siteLoadSettingValues[11]);
      classicMode = parseInt(siteLoadSettingValues[12]);
      spacingPx = parseInt(siteLoadSettingValues[15]);
      
      console.log(siteLoadSettingValues + " is the major styles")
      for(ae = 0; ae < siteLoadSettingValues[14].length; ae++) {
        majorStyles[ae] = siteLoadSettingValues[14].charAt(ae);
      }
      console.log(majorStyles + " is the major styles") 

      changeFont(CorrectFont);
      changePalette(Palette);
      SetAudio(parseInt(NotifTimer)); //this does not work //then WHY did you add it??
      setFlash(window.EventFlashSec);
      changeIcons(iconsVisible);
      changeClock(clockStyle);
      changeClassic(classicMode);
      changeTabTimer(tabTimerVisible);
      changeSpacing(spacingPx);
      
      changeMajorStyle("border", majorStyles[0]);
      changeMajorStyle("shadow", majorStyles[1]);
      
      setTimestamps("tod", false);
      setTimestamps("tue", false);
      setTimestamps("dnc", false);

      VisibleEvents = [];
      AudioEvents = [];
      var leadingZeroes = (num, places) => String(num).padStart(places, '0')
      var number = siteLoadSettingValues[0];

      if(number == "0") {
        document.getElementById('alert-noevents').style.display = "block";
      }
      var BinaryEvents = (leadingZeroes(parseInt(number).toString(2),events.length));
      console.log(BinaryEvents)
      for(i = 0; i < events.length; i++) {
          if(BinaryEvents.charAt(i) == "1") {
            VisibleEvents.push(events[(events.length - 1) - i]);
          }
      }    
      console.log(VisibleEvents);
  
      for(var i = 0; i < VisibleEvents.length; i++) { // filter out events that aren't in VisibleEvents
        for(var j = window.HiddenEventCount; j < EventsToLoad; j++) {
        if (window.data[j]["event"].includes(VisibleEvents[i]) && !ok_ids.includes(j)) {
          document.getElementById('event_' + String(j)).style.display = "block";
          ok_ids.push(j);
          console.log(ok_ids)
            console.log("saved " + window.data[j]["event"])
          }  
        }
      }

      for(var j = window.HiddenEventCount; j < EventsToLoad; j++) {
        if (!ok_ids.includes(j)) {
          document.getElementById('event_' + String(j)).style.display = "none";
          console.log("hid " + window.data[j]["event"])
        }
      }

      checkVisibleEvents();
  
      var leadingZeroes = (num, places) => String(num).padStart(places, '0')
      var number = siteLoadSettingValues[1];
      var BinaryEvents = (leadingZeroes(parseInt(number).toString(2),events.length));
      console.log(BinaryEvents)
      for(i = 0; i < events.length; i++) {
          if(BinaryEvents.charAt(i) == "1") {
            AudioEvents.push(events[(events.length - 1) - i]);
          }
      }
      console.log(AudioEvents);
      if(window.AudioEvents.length == 0 && DoesStuffExist == true) {
      console.log(window.AudioEvents + " audioevents")
      document.getElementById('alert-nobells').style.display = "block";
      }

      changeTheme(theme);
      HasStuffLoaded = true;

      var site_url = new URL(window.location.href);
      if(site_url.searchParams.get("2022") != null) changeToOldDesign();
  }

  function changeToOldDesign() { // makes the new version look exactly like the old one. problem solved!  :thumbsup:
    changePalette(0);
    changeIcons(0);
    changeMajorStyle("border", 0);
    changeMajorStyle("shadow", 0);
    changeSpacing(0);
    changeClassic(1);
    changeFont("minecraft");
  }
  
  function NotifToggle(toggle) {
    if (window.AudioEvents.includes(toggle)) {
      SettingsNotifyEvents = (SettingsNotifyEvents - Math.pow(2, window.events.indexOf(toggle)));
      const index = window.AudioEvents.indexOf(toggle);
      if (index > -1) {
        window.AudioEvents.splice(index, 1);
        document.getElementById('notif-' + toggle.replace(/\s/g, '')).style.fill = "#888888";
      }
      if(window.AudioEvents.length == 0 && NotifTimer > 0) {
        document.getElementById('alert-nobells').style.display = "block";
      }
    } else {
      window.AudioEvents.push(toggle);
      document.getElementById('alert-nobells').style.display = "none";
      document.getElementById('notif-' + toggle.replace(/\s/g, '')).style.fill = NormalText;
      SettingsNotifyEvents = (SettingsNotifyEvents + Math.pow(2, window.events.indexOf(toggle)));
      for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
      }
  }
    console.log("List of events that a sound will play for:")
    console.log(window.AudioEvents);
    SaveSettings('noreload');
  }
  
  function AboutMe(variable) {
      var date = new Date(null);
      date.setSeconds(variable / 1000);
      var endpoint = date.toISOString().substr(14, 5);
      return(endpoint); 
  }

  function Help() { //redirects the user to the BrookeAFK Help Guide
    window.open("help", '_blank').focus();
  }

  function prefixZero(number, size) { // adds a number of prefix zeroes to a number
    number = number.toString();
    while(number.length < size) {
      number = "0" + number;
    }
    return number;
  }
  
  function CurrentEvent() {
    currentTime = Date.now() + offset;
  
    if (HiddenEventCount > 0 && DemolitionTime - currentTime >= 0) {
      var result = AboutMe(DemolitionTime - currentTime);
      document.getElementById("current-event-mobilebreak").style.display = "";
      //console.log(result); // returns time left in event display
      let recentEventData = window.data[HiddenEventCount - 1];
      let correctColorCode =
        trueEventColors[events.indexOf(recentEventData["event"])];
      if (recentEventData["type"] == "major") {
        if (IsItACountdown[events.indexOf(recentEventData["event"])] == "yes") {
          //console.log(((VisibilityLength[events.indexOf(window.data[HiddenEventCount - 1]['event'])]) * 1000) /* should return like "480000" (8m) in most cases */ - 180000)
          if (currentTime >= 180000 + TimeOfEventStart) {
            document.getElementById("current-event").innerHTML =
              `<span style="color: #aa00aa; font-family: ` + CorrectBold + `;">` + all_text[1] + `</span> <span style="color:` +
              correctColorCode +
              `; font-family: ` + CorrectBold + `;">` +
              window.data[HiddenEventCount - 1]["event"].toUpperCase() +
              `!</span> <span style="color: #aaaaaa;">` + all_text[3] + `<span style="color: #55ff55;">` +
              AboutMe(DemolitionTime - currentTime) +
              `</span></span>`;
          } else {
            document.getElementById("current-event").innerHTML =
              `<span style="color: #aa00aa; font-family: ` + CorrectBold + `;">` + all_text[1] + `</span> <span style="color:` +
              correctColorCode +
              `; font-family: ` + CorrectBold + `;">` +
              window.data[HiddenEventCount - 1]["event"].toUpperCase() +
              `!</span> <span style="color: #aaaaaa;">` + all_text[2] + `<span style="color: #55ff55;">` +
              AboutMe(TimeOfEventStart + 180000 - currentTime) +
              `</span></span>`;
            //console.log("major + countdown");
          }
        } else {
          document.getElementById("current-event").innerHTML =
            IsItACountdown[events.indexOf(recentEventData["event"])];
          console.log("bro??");
        }
      } else if (recentEventData["type"] == "minor") {
        if (IsItACountdown[events.indexOf(recentEventData["event"])] == "yes") {
          document.getElementById("current-event").innerHTML =
            `<span style="color: #ff55ff; font-family: ` + CorrectBold + `;">` + all_text[0] + `</span> <span style="color:` +
            correctColorCode +
            `; font-family: ` + CorrectBold + `;">` +
            window.data[HiddenEventCount - 1]["event"].toUpperCase() +
            `!</span> <span style="color: #aaaaaa;">` + all_text[3] + `<span style="color: #55ff55;">` +
            result +
            `</span></span>`;
          //console.log("minor + countdown");
        } else {
          document.getElementById("current-event").innerHTML =
            IsItACountdown[events.indexOf(recentEventData["event"])];
          //console.log("minor, no countdown");
        }
      }
    } else {
      document.getElementById("current-event").style.display = "none";
      document.getElementById("current-event-mobilebreak").style.display = "none";
    }
  }
  
  function SettingsMenu() {
    if(settingsOpened == false) {
      settingsOpened = true;
      document.getElementById('settings-section').style.display = "block";
      console.log("Settings opened.");
    } else if(settingsOpened == true) {
      settingsOpened = false;
      console.log("Settings closed.");
      document.getElementById('settings-section').style.display = "none";
    }
    let here = new URL(window.location.href);
  }

  function localSave() { // saves settings every time you click on something
    localStorage.setItem('theme', theme);
      localStorage.setItem('visible', SettingsSelectedEvents);
      localStorage.setItem('notifs', SettingsNotifyEvents);
      localStorage.setItem('palette', Palette);
      localStorage.setItem('timestamps', (showEventToD | 0).toString() + (showEventTuE | 0).toString() + (showEventDNC | 0).toString());
      localStorage.setItem('flashing', EventFlashSec);
      localStorage.setItem('reminder', NotifTimer);
      localStorage.setItem('desktop', SettingsDesktopNotifs);
      localStorage.setItem('audio', SettingsAudioNotifs);
      localStorage.setItem('icons', iconsVisible);
      localStorage.setItem('clock', clockStyle);
      localStorage.setItem('classic', classicMode);
      localStorage.setItem('tabtimer', tabTimerVisible);
      if(CorrectFont == 'Inter') localStorage.setItem('font', '0');
      if(CorrectFont == 'sans-serif') localStorage.setItem('font', '1');
      if(CorrectFont == 'minecraft') localStorage.setItem('font', '2');
      localStorage.setItem('spacing', spacingPx);
      localStorage.setItem('majorstyle', majorStyles[0].toString() + majorStyles[1].toString())

      localStorage.setItem('settings-version', "13");
  }

  function resetSettings() { // resets all settings in the localStorage
    for(h = 0; h < allSettings.length; h++) {
      localStorage.removeItem(allSettings[h]);
    }
  }
  
  function SaveSettings(action = false) {  // save settings, clear settings, reload page
    if(DoesStuffExist) {
    console.log("Saved settings.");
    var annoyingBanner = localStorage.getItem("hide-redesign-banner");
    
      if(action == "clear") {
        resetSettings();
        if(annoyingBanner != undefined) localStorage.setItem("hide-redesign-banner", annoyingBanner);
        window.location.reload();
      } else {
      if(action == "cleareverything") {
        let here = new URL(window.location.href);
        for(i = 0; i < allSettings.length; i++) here.searchParams.delete(allSettings[i]);
        here.searchParams.delete("2022");
        resetSettings();
        if(annoyingBanner != undefined) localStorage.setItem("hide-redesign-banner", annoyingBanner);
        console.log("cleared local storage :)")
        window.location = here;
      }
      if(action != "cleareverything") localSave();
    }
  }
}

  function nickname(name, isPitWikiLink = false) { // changes Pit Supporter names ("KOTL") to cooler names ("King of the Ladder"). probably also good for other language support. also good for making links to Pit Wiki
    if(events.indexOf(name) == -1) return "?"
    else if(isPitWikiLink) return "https://pit.wiki/" + pit_wiki_links[events.indexOf(name)];
    else return nicknamesen_CA[events.indexOf(name)];
  }

  function addNamesandImages(transformation) { // adds names like "King of the Hill" and images to each div
    for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
      var nicknamevent = nickname(transformation[i].event);
      var wikievent = nickname(transformation[i].event, true);

      if(classicMode == true) {
        if (showEventToD == true && showEventTuE == true) {
          document.getElementById('event_' + String(i)).innerHTML = ((parseInt(iconsVisible)?(`<img src="./event_icons/`+ transformation[i].event.toLowerCase().replaceAll(' ','_') + `.png" class="eventicon">&nbsp;&nbsp;`):"") + `<span class="timers" id="timer_` + i + `"></span>: ` + `<span id="boldmajor_` + i + `"><a class="blanklink" id="name_` + i + `" target="_blank" href="` + wikievent + `">` + transformation[i].event + `</a></span> (` + TimeOfDay(transformation[i].timestamp) + `)`);
        } else if (showEventToD == false && showEventTuE == true) {
          document.getElementById('event_' + String(i)).innerHTML = ((parseInt(iconsVisible)?(`<img src="./event_icons/`+ transformation[i].event.toLowerCase().replaceAll(' ','_') + `.png" class="eventicon">&nbsp;&nbsp;`):"") + `<span class="timers" id="timer_` + i + `"></span>: ` + `<span id="boldmajor_` + i + `"><a class="blanklink" id="name_` + i + `" target="_blank" href="` + wikievent + `">` + transformation[i].event + `</a></span>`);
        } else if (showEventToD == true && showEventTuE == false) {
          document.getElementById('event_' + String(i)).innerHTML = ((parseInt(iconsVisible)?(`<img src="./event_icons/`+ transformation[i].event.toLowerCase().replaceAll(' ','_') + `.png" class="eventicon">&nbsp;&nbsp;`):"") + `<span id="boldmajor_` + i + `"><a class="blanklink" id="name_` + i + `" target="_blank" href="` + wikievent + `">` + transformation[i].event + `</a></span> (` + TimeOfDay(transformation[i].timestamp) + `)`);
        } else if (showEventToD == false && showEventTuE == false) {
          document.getElementById('event_' + String(i)).innerHTML = ((parseInt(iconsVisible)?(`<img src="./event_icons/`+ transformation[i].event.toLowerCase().replaceAll(' ','_') + `.png" class="eventicon">&nbsp;&nbsp;`):"") + `<span id="boldmajor_` + i + `"><a class="blanklink" id="name_` + i + `" target="_blank" href="` + wikievent + `">` + transformation[i].event + `</a></span>`);
        }
        if(data[i].type == "major") document.getElementById("boldmajor_" + i).style.fontWeight = "bold";
      } else {
        if (showEventToD == true && showEventTuE == true) {
          document.getElementById('event_' + String(i)).innerHTML = ((parseInt(iconsVisible)?(`<img src="./event_icons/`+ transformation[i].event.toLowerCase().replaceAll(' ','_') + `.png" class="eventicon">&nbsp;&nbsp;`):"") + `<b><a class="blanklink" id="name_` + i + `"  target="_blank" href="` + wikievent + `">` + nicknamevent + `</a></b> in <span class="timers" id="timer_` + i + `"></span> &mdash; ` + TimeOfDay(transformation[i].timestamp));
        } else if (showEventToD == false && showEventTuE == true) {
          document.getElementById('event_' + String(i)).innerHTML = ((parseInt(iconsVisible)?(`<img src="./event_icons/`+ transformation[i].event.toLowerCase().replaceAll(' ','_') + `.png" class="eventicon">&nbsp;&nbsp;`):"") + `<b><a class="blanklink" id="name_` + i + `"  target="_blank" href="` + wikievent + `">` + nicknamevent + `</a></b> in <span class="timers" id="timer_` + i + `"></span>`);
        } else if (showEventToD == true && showEventTuE == false) {
          document.getElementById('event_' + String(i)).innerHTML = ((parseInt(iconsVisible)?(`<img src="./event_icons/`+ transformation[i].event.toLowerCase().replaceAll(' ','_') + `.png" class="eventicon">&nbsp;&nbsp;`):"") + `<b><a class="blanklink" id="name_` + i + `"  target="_blank" href="` + wikievent + `">` + nicknamevent + `</a></b> at ` + TimeOfDay(transformation[i].timestamp));
        } else if (showEventToD == false && showEventTuE == false) {
          document.getElementById('event_' + String(i)).innerHTML = ((parseInt(iconsVisible)?(`<img src="./event_icons/`+ transformation[i].event.toLowerCase().replaceAll(' ','_') + `.png" class="eventicon">&nbsp;&nbsp;`):"") + `<b><a class="blanklink" id="name_` + i + `"  target="_blank" href="` + wikievent + `">` + nicknamevent + `</a></b>`);
        }
      }

      if(transformation[i]['type'] == "major" && majorStyles[1] == true) document.getElementById('name_' + String(i)).classList.add("majorshadow");

    }


    panicevents = [];
  }
  
  function CuteColors(conversion) { //adds cute colors

  if(window.Palette.length > 1 && !(window.Palette.startsWith('gradient'))) {
    document.getElementById('brookeafk-com').innerText = window.Palette + ".com"
    window.theme = "dark";
  }

  if(window.theme == "light") {
    var TheRightArrayToFindTheColors = window["lightColors" + Palette];
  }
  if(window.theme == "dark") {
    var TheRightArrayToFindTheColors = window["darkColors" + Palette];
  }
  if(DoesStuffExist == true) {
    console.log(Palette)
    if(Palette.toString().startsWith("gradient")) { // if awesome gradients are enabled
      for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
        document.getElementById('event_' + String(i)).style.background = 
        `linear-gradient(90deg, #`+ eval("gradients" + Palette.substring(9) + `[events.indexOf(conversion[i]['event'])][0]`) + ` 0%, #` + eval("gradients" + Palette.substring(9) + `[events.indexOf(conversion[i]['event'])][1]`) + ` 100%)`;
      }
    } else { // if the user is totally uncool and refuses to use my awesome gradients
      console.log("uncool user :/")
      for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
          document.getElementById('event_' + String(i)).style.background = TheRightArrayToFindTheColors[events.indexOf(conversion[i]['event'])];
          if(Palette == "Maleffect") { // easter egg
            document.getElementById('event_' + String(i)).style.backgroundColor = "#222222";
            document.getElementById('event_' + String(i)).style.color = TheRightArrayToFindTheColors[events.indexOf(conversion[i]['event'])];
          } else if(showEventTuE == true) {
            document.getElementById('timer_' + String(i)).style.color = NormalText;
        }
      }
    }

  for(i = window.HiddenEventCount; i < EventsToLoad; i++) {
  if(conversion[i]['type'] == "major" && majorStyles[0] == true) {
    document.getElementById('event_' + String(i)).classList.add("majorborder");
  } else {
    document.getElementById('event_' + String(i)).classList.remove("majorborder");
  }
  }
  }}

  function cycle1() {
    counter += 1;
    window.data = window.data_backup;
    RapidFirst(window.data);
    flipEvents(counter);
  }

  function cycle5() {
    UpdateEverything(window.data);
      AudioChecker();
      CurrentEvent();
      DayNightCycle();
      mapRotation();
      autoReload();
      updateTabTimer();
  }

  function cycle25() {
    noEvents();
  }
    </script>
  
  <style>
    #newsite:hover {
      opacity: 0.5;
    }

    .topcontainer {
      padding: 15px;
      position: relative;
      bottom: 20px;
    }

    .wordmark {
      font-size: 40px;
      background: linear-gradient(90deg, #f572d4 0%, #8d3caf 100%);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent; 
      -moz-background-clip: text;
      -moz-text-fill-color: transparent;
      display: inline-block;
    }

    .settingsheader {
      font-size: 18px;
      background: linear-gradient(90deg, #06f5a5 0%, #96a0b0 100%);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent; 
      -moz-background-clip: text;
      -moz-text-fill-color: transparent;
      font-variant-caps: small-caps;
      font-weight: bold;
      font-style: oblique;
    }

    .animated {
      animation: rotate 1s;
    }

    .flip {
      animation: flip_ 1s;
      animation-timing-function: ease-in-out;
    }

    @keyframes rotate {
      0%   { transform: rotate3d(0, 0, 0, 0deg); }
      1%   { transform: rotate3d(0, 0, 0, 0deg); }
      100% { transform: rotate3d(var(--xrot), var(--yrot), var(--zrot), 360deg); }
    }

    @keyframes flip_ {
      0%   { transform: rotate3d(0, 0, 0, 0deg); }
      1%   { transform: rotate3d(0, 0, 0, 0deg); }
      100% { transform: rotate3d(0.48, 0, 0.06, 360deg); }
    }

    #settings {
      font-family: Material;
    }

    .icon {
      font-family: Material;
      font-size: 25px;
      color: #808080;
    }

    .icon:hover {
      color: var(--normaltext);
      font-size: 30px;
    }

    a:link:not(.blanklink) {
      color: #B15AC2;
      background-color: transparent;
      text-decoration: none;
    }
    
    a:visited:not(.blanklink) {
      color: #8a4a99;
      background-color: transparent;
      text-decoration: none;
    }
    
    a:hover {
      color: #E7C2EE;
      background-color: transparent;
      text-decoration: underline;
    }
    
    a:active {
      color: #EDDDF0;
      background-color: transparent;
      text-decoration: underline;
    }

    .dnb {
      height: 0;
      padding: 5px;
      float: left;
      position: relative;
      bottom: 40px;
      left: 10px;
      display: flex;
      align-items: center;
      vertical-align:center;
      justify-content: center;
      font-size: 14px;
      z-index: 1;
    }

    .mobileanno {
      height: 0;
      padding: 5px;
      bottom: 20px;
      position: relative;
      display: flex;
      align-items: center;
      vertical-align:center;
      justify-content: center;
      font-size: 14px;
    }
  
    p:not(.credits > p, .option, .settingsheader) {
      font-size: 1.5em;
    }

    hr {
      display: block; height: 1px;
    border: 0; border-top: 4px solid rgba(255, 255, 255, 0.6);
    margin: 1em 0; padding: 0; 
    }

    .timers, #current-event {
      font-variant-numeric: tabular-nums;
    }
    
    .blinktext-light {
    background-color: #f00;
    -webkit-animation: blink-text-light 1000ms linear infinite;
    -moz-animation: blink-text-light 1000ms linear infinite;
    -ms-animation: blink-text-light 1000ms linear infinite;
    -o-animation: blink-text-light 1000ms linear infinite;
    animation: blink-text-light 1000ms linear infinite;
  }

  .blinktext-dark {
    background-color: #f00;
    -webkit-animation: blink-text-dark 1000ms linear infinite;
    -moz-animation: blink-text-dark 1000ms linear infinite;
    -ms-animation: blink-text-dark 1000ms linear infinite;
    -o-animation: blink-text-dark 1000ms linear infinite;
    animation: blink-text-dark 1000ms linear infinite;
  }
  .flashtext {
    -webkit-animation: flash-text 1000ms linear infinite;
    -moz-animation: flash-text 1000ms linear infinite;
    -ms-animation: flash-text 1000ms linear infinite;
    -o-animation: flash-text 1000ms linear infinite;
    animation: flash-text 1000ms linear infinite;
  }
  @keyframes blink-text-light {
    0% { color: #ff0000; opacity: 1; }
    10% { color: #e80000;opacity: 1; }
    15% { color: #d10000;opacity: 1; }
    20% { color: #b80000;opacity: 1; }
    25% { color: #a30000;opacity: 1; }
    30% { color: #8c0000;opacity: 1; }
    35% { color: #750000;opacity: 1; }
    40% { color: #5e0000;opacity: 1; }
    45% { color: #470000;opacity: 1; }
    49% { color: #300000;opacity: 1; }
    50% { color: #190000;opacity: 1; }
  }

  @keyframes blink-text-dark {
    0% { color: #c00000; opacity: 1; }
    10% { color: #c51a1a;opacity: 1; }
    15% { color: #ca3333;opacity: 1; }
    20% { color: #cf4d4d;opacity: 1; }
    25% { color: #d56666;opacity: 1; }
    30% { color: #da8080;opacity: 1; }
    35% { color: #e59999;opacity: 1; }
    40% { color: #eab3b3;opacity: 1; }
    45% { color: #f5cccc;opacity: 1; }
    49% { color: #fae6e6;opacity: 1; }
    50% { color: #ffffff;opacity: 1; }
  }
  @keyframes flash-text {
    0% { opacity: 1; }
    15% { opacity: 0.85; }
    33% { opacity: 0.7; }
    40% { opacity: 0.55; }
    46% { opacity: 0.4; }
    50% { opacity: 0.25; }
    54% { opacity: 0.4; }
    60% { opacity: 0.55; }
    67% { opacity: 0.7; }
    85% { opacity: 0.85; }
    100% { opacity: 1; }
  }

  .hand_cursor {
    cursor: pointer;
  }
  
  #settings-section {
    display: none;
    margin-left: 60px;
    position: relative;
    bottom: 40px;
  }
  
  .unselectable {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
  }

  .rainbow_text_animated {
    background: linear-gradient(to right, #f55, #fa0, #ff5, #5f5, #5ff, #f5f, #f55, #fa0, #ff5, #5f5, #5ff, #f5f, #f55, #fa0, #ff5, #5f5, #5ff, #f5f, #f55, #fa0, #ff5, #5f5, #5ff, #f5f, #f55);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: rainbow_animation 12s ease-in-out infinite;
    background-size: 400% 100%;
}

@keyframes rainbow_animation {
    0%,100% {
        background-position: 0 0;
    }

    50% {
        background-position: 100% 0;
    }
}

.w100 {
  font-weight: 100;
}
.w200 {
  font-weight: 200;
}
.w300 {
  font-weight: 300;
}
.w400 {
  font-weight: 400;
}
.w500 {
  font-weight: 500;
}
.w600 {
  font-weight: 600;
}
.w700 {
  font-weight: 700;
}
.w800 {
  font-weight: 800;
}
.w900 {
  font-weight: 900;
}

.majorborder {
  box-shadow: inset 0px 0px 0px 4px rgba(255, 255, 255, 0.8);
  background-origin: "border-box";
}

.majorshadow {
  text-shadow: 2px 2px 0px rgba(255, 255, 255, 0.4);
}

@font-face {
  font-family: Inter;
  src: url("./font/Inter-Regular.ttf");
  font-weight: regular;
}

@font-face {
  font-family: Inter;
  src: url("./font/Inter-Bold.ttf");
  font-weight: bold;
}

@font-face {
  font-family: Inter;
  src: url("./font/Inter-SemiBold.ttf");
  font-weight: 600;
}

@font-face {
  font-family: Material;
  src: url("./font/Material.ttf");
}

@font-face {
  font-family: minecraft;
  src: url("./font/MinecraftRegular.otf");
  font-weight: 400;
}

@font-face {
  font-family: minecraft;
  src: url("./font/MinecraftBold.otf");
  font-weight: bold;
}

a, .icon, div {
  transition-duration: 0.2s;
}

.option {
  font-size: 15px;
}

* { /* should make font look less bad on Webkit */
  -webkit-font-smoothing: antialiased;
  font-smooth: never; /* !!! */
}

.eventicon {
  width: 32px;
  position: relative;
  float: left;
  bottom: 4px;
}

.event {
  padding: 16px; 
  background-color: #222222;
  text-align: left;
  font-size: 1.5em;
  line-height: 100%;
  margin: 5px;
}

.tip {
  position: relative;
  border-bottom: 1px dotted #ffffff88;
  cursor: help;
}

.tip .tiptext {
  visibility: hidden;
  word-wrap: break-word;
  width: 160px;
  background-color: #000000cc;
  text-align: center;
  border-radius: 6px;
  padding: 5px 0;
  position: absolute;
  z-index: 1;
  bottom: 150%;
  left: -85px;
  padding: 10px;
  font-weight: 400;
  font-style: oblique;
  color: #fff;
  opacity: 0;
  transition: opacity 0.4s;
}

.tip .tiptext::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: #00000088 transparent transparent transparent;
}

.tip:hover .tiptext, .tip:active .tiptext {
  visibility: visible;
}

.tip:hover .tiptext {
  opacity: 1;
}

#notifications-major {
  display: block; position: absolute; top: -50px; right: 200px; text-align: right; font-size: 15px; color: #FFFFFF;
}

#notifications-minor {
  display: block; position: absolute; top: -50px; right: 50px; text-align: right; font-size: 15px; color: #FFFFFF;
}

.blanklink {
  color: unset;
  text-decoration: none;
}

.credits {
  color: rgba(255, 255, 255, 0.6);
  position: relative;
  left: 10px;
  font-size: 20px;
  font-style: oblique 9deg;
  opacity: 0.8;
  font-weight: 400;
  line-height: 1em;
  display: inline-block;
  position: relative;
  bottom: 15px;
  width: 90%;
}

.bigtext {
  color: rgba(255, 255, 255, 0.6);
  position: relative;
  left: 10px;
  font-size: 20px;
  font-style: oblique 9deg;
  opacity: 0.8;
  font-weight: 400;
}

.ver {
  background: linear-gradient(140deg, rgb(127, 42, 192) 0%, rgb(43, 188, 214) 100%);
  text-align: center;
  border-radius: 30px;
  display: inline-block;
  height: 25px;
  font-weight: bold;
  margin: 0px;
  line-height: 1.5;
  font-size: 16px;
  padding-left: 15px;
  padding-right: 15px;
}

:root {
  --normaltext: #FFF;
  --xrot: 0.6;
  --yrot: 2;
  --zrot: 0.8;
}

.wrapper {
  touch-action: pan-x pan-y;
  overflow-x: hidden;
  position: relative;
}

@media only screen and (max-width: 500px) {
  * {
    transition-duration: 0s !important;
  }

  #current-event {
    display: "";
    text-align: left;
    left: 10px;
  }

  #settings-section {
    margin-left: 20px;
  }

  #notifications-major, #notifications-minor {
    position: relative;
    width: 140px;
    text-align: center;
    font-size: 18px;
  }

  #notifications-major {
    left: 180px;
    top: 10px;
  }

  #notifications-minor {
    top: -293px;
    right: -20px;
  }

  .event {
    line-height: 1.2em;
  }

  .option {
    font-size: 18px;
  }
}

</style>
  
  <script defer src="https://static.cloudflareinsights.com/beacon.min.js/v652eace1692a40cfa3763df669d7439c1639079717194" integrity="sha512-Gi7xpJR8tSkrpF7aordPZQlW2DLtzUlZcumS8dMQjwDHEnw9I7ZLyiOj/6tZStRBGtGgN6ceN6cMH8z7etPGlw==" data-cf-beacon='{"rayId":"6ee9d8195eaa7e2c","version":"2021.12.0","r":1,"token":"7ae79fbdb6224da3a02aeec2ac9658a6","si":100}' crossorigin="anonymous"></script>
  </body>
  
  </html>
