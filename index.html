
  <!DOCTYPE HTML>
  <html>
  <head>
    <script type="text/javascript" src="https://code.jquery.com/jquery-latest.min.js"></script>
    <link rel="apple-touch-icon" sizes="180x180" href="favicon_icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon_icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon_icons/favicon-16x16.png">
    <link rel="manifest" href="favicon_icons/site.webmanifest">
    <link rel="shortcut icon" type="image/x-icon" href="favicon_icons/favicon.ico">
    <link href="font/webfontkit-20220210-002804/stylesheet.css" type="text/css" rel="stylesheet">
    <title>Hypixel Pit Events Tracker</title>
    <meta name="description" content="This program allows you to view the upcoming events in the Hypixel Pit in real time."> 
  </head>
  
  <body style="font-family: minecraftregular" background-color="black" class="unselectable">
  
    <div id="current-event" style="position: absolute; top: 35px; font-size: 25px; width: 475px; word-wrap: break-word; left: 35%; vertical-align: middle; padding: 1px;" class="flashtext unselectable" align="center">Current events will<br>show up here.</div>
  
  
    <div class="img-with-text" display=""><img src="3457688aa57c4d71ab9d22b04f9160db.png" alt="hi!" draggable="false" width=50px, height=auto, style="float:left"><p style="padding: 15px; padding-left: 60px; padding-top: 8px" id="brookeafk-com">brookeafk.com</p><span style="position:relative; left:60px; top:-40px;" id="settings" onclick="SettingsMenu()" class="hand_cursor">View Settings</span>
    </div>
  
    <div style="background: #314; padding: 5px; width: 120px; height: 32px; position: absolute; left: 300px; top: 24px; border-radius: 25px; display:flex; align-items: center; vertical-align:center; justify-content: center;
    " id="day-night-border"><div id="day-night" style="font-size: 22px; vertical-align: middle; display: table-cell;" align="center">00:00&nbsp;</div><svg id="day-svg"  xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF"><path d="M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0 c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2 c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1 C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06 c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41 l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41 c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36 c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg></div>
    
  <div id="settings-section" style="display: none; position: relative; bottom: 40px;">
  <p style="font-size:15px"><span>Theme: </span><span id="settings-theme-dark" onclick='ChangeTheme("dark")'>Dark</span><span> / </span><span id="settings-theme-light" onclick='ChangeTheme("light")'>Light</span></p> 
  <p style="font-size:15px"><span>Palette: </span><span id="settings-palette-0" onclick='ChangePalette(0)'>Theme 0</span> / <span id="settings-palette-1" onclick='ChangePalette(1)'>Theme 1</span> / <span id="settings-palette-2" onclick='ChangePalette(2)'>Theme 2</span> / <span id="settings-palette-3" onclick='ChangePalette(3)'>Theme 3</span></p>
  <p style="font-size:15px"><span id="tut-notif" style="color: #ffff80">Pre-event notifications</span><span>: </span><span id="settings-audio"><span id="audio-300" onclick='SetAudio(300);' class="hand_cursor">5m</span><span> / </span><span id="audio-180" onclick='SetAudio(180);' class="hand_cursor">3m</span><span> / </span><span id="audio-60" onclick='SetAudio(60);' class="hand_cursor">1m</span><span> / </span><span id="audio-0" onclick='SetAudio(-10);' class="hand_cursor">Never</span></span></p>
  <p id="anotif" style="font-size:15px"><span>- Audio notifications: </span><span id="desktop-notifs"><span id="audio-on" onclick='ANotif(1);' class="hand_cursor">On</span><span> / </span><span id="audio-off" onclick='ANotif(0);' class="hand_cursor">Off</span></span></p>
  <p id="dnotif" style="font-size:15px"><span>- Desktop notifications (BETA): </span><span id="desktop-notifs"><span id="desktop-on" onclick='DNotif(1);' class="hand_cursor">On</span><span> / </span><span id="desktop-off" onclick='DNotif(0);' class="hand_cursor">Off</span></span></p>
  <p style="font-size:15px"><span id="alert-nobells" style="color: #ff7777; display: none">You're not being reminded for any events!<br>Click the bells in the top-right corner to receive notifications.</span></p>
  <p style="font-size:15px"><span id="alert-notypes" style="color: #ff7777; display: none">Make sure to turn either "Audio notifications"<br>or "Desktop notifications" on to receive alerts.</span></p>
  <p style="font-size:15px"><span>Timestamps: </span><span id="settings-ts-tod" onclick='ToggleTimestamps("tod");' class="hand_cursor">Time of Day</span><span> / </span><span id="settings-ts-tue" onclick='ToggleTimestamps("tue");' class="hand_cursor">Time Until Event</span> / <span id="settings-ts-dnc" onclick='ToggleTimestamps("dnc");' class="hand_cursor">Day-Night Cycle</span></p>
  <p style="font-size:15px"><span id="settings-flashing">Flashing text: </span><span id="settings-flash"><span id="settings-flash-60" onclick='EventFlash(60);' class="hand_cursor">60s</span><span> / </span><span id="settings-flash-30" onclick='EventFlash(30);' class="hand_cursor">30s</span><span> / </span><span id="settings-flash-10" onclick='EventFlash(10);' class="hand_cursor">10s</span><span> / </span><span id="settings-flash-0" onclick='EventFlash(-10);' class="hand_cursor">Never</span></span></p>
  <p style="font-size:15px"><span id="alert-noevents" style="color: #ff7777; display: none">You don't have any events selected!<br>Click the event names in the top-right corner to make some visible.</span></p>

  <div id="notifications-major" style="display: block; position: absolute; top: -50px; right: 200px; text-align: right; font-size: 15px; color: #FFFFFF;">
    <div><span id="visible-Pizza" onclick='VisibilityToggle("Pizza")' class="hand_cursor">Pizza</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Pizza" onclick='NotifToggle("Pizza")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-Raffle" onclick='VisibilityToggle("Raffle")' class="hand_cursor">Raffle</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Raffle" onclick='NotifToggle("Raffle")'class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-Squads" onclick='VisibilityToggle("Squads")' class="hand_cursor">Squads</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Squads" onclick='NotifToggle("Squads")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-Blockhead" onclick='VisibilityToggle("Blockhead")' class="hand_cursor">Blockhead</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Blockhead" onclick='NotifToggle("Blockhead")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-Spire" onclick='VisibilityToggle("Spire")' class="hand_cursor">Spire</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Spire" onclick='NotifToggle("Spire")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-Robbery" onclick='VisibilityToggle("Robbery")' class="hand_cursor">Robbery</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Robbery" onclick='NotifToggle("Robbery")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-TeamDeathmatch" onclick='VisibilityToggle("Team Deathmatch")' class="hand_cursor">Team Deathmatch</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-TeamDeathmatch" onclick='NotifToggle("Team Deathmatch")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-RagePit" onclick='VisibilityToggle("Rage Pit")' class="hand_cursor">Rage Pit</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-RagePit" onclick='NotifToggle("Rage Pit")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-Beast" onclick='VisibilityToggle("Beast")' class="hand_cursor">Beast</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Beast" onclick='NotifToggle("Beast")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <br><div id="test-audio" style="color: #ffffff;" onclick='TestAudio()' class="hand_cursor">Preview Audio</div><br><div id="select-all" style="color: #ffffff;" onclick='SelectOnly("everything")' class="hand_cursor">Select All</div>
  </div>
  <div id="notifications-minor" style="display: block; position: absolute; top: -50px; right: 50px; text-align: right; font-size: 15px; color: #FFFFFF;">
    <div><span id="visible-DragonEgg" onclick='VisibilityToggle("Dragon Egg")' class="hand_cursor">Dragon Egg</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-DragonEgg" onclick='NotifToggle("Dragon Egg")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-KOTH" onclick='VisibilityToggle("KOTH")' class="hand_cursor">KOTH</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-KOTH" onclick='NotifToggle("KOTH")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-KOTL" onclick='VisibilityToggle("KOTL")' class="hand_cursor">KOTL</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-KOTL" onclick='NotifToggle("KOTL")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-2xRewards" onclick='VisibilityToggle("2x Rewards")' class="hand_cursor">2x Rewards</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-2xRewards" onclick='NotifToggle("2x Rewards")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-CarePackage" onclick='VisibilityToggle("Care Package")' class="hand_cursor">Care Package</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-CarePackage" onclick='NotifToggle("Care Package")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-Auction" onclick='VisibilityToggle("Auction")' class="hand_cursor">Auction</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Auction" onclick='NotifToggle("Auction")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-QuickMaths" onclick='VisibilityToggle("Quick Maths")' class="hand_cursor">Quick Maths</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-QuickMaths" onclick='NotifToggle("Quick Maths")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-GiantCake" onclick='VisibilityToggle("Giant Cake")' class="hand_cursor">Giant Cake</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-GiantCake" onclick='NotifToggle("Giant Cake")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <div><span id="visible-Allbounty" onclick='VisibilityToggle("All bounty")' class="hand_cursor">All bounty</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Allbounty" onclick='NotifToggle("All bounty")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
    <br><div id="select-major" style="color: #ffffff;" onclick='SelectOnly("major")' class="hand_cursor">Majors Only</div>
    <div id="select-minor" style="color: #ffffff;" onclick='SelectOnly("minor")' class="hand_cursor">Minors Only</div>
    <div id="select-none" style="color: #ff7777;" onclick='SelectOnly("nothing")' class="hand_cursor">Deselect All</div>
    <br><div id="save" style="color: #8888ff;" onclick='SaveSettings()' class="hand_cursor">Save Settings</div>
  
  </div>
  </div>
  
  <script>
  
  var HiddenEventCount = 0;
  var EventsToLoad = 1;
  var version_number = "0.6.0"
  var counter = 4;
  var settingsOpened = false;
  var NormalText = "#000000";
  var EventFlashSec = 60;
  var NotifTimer = -10;
  var DoesStuffExist = false;
  var HasStuffLoaded = false;
  var Palette = 0;
  var SettingsSelectedEvents = 262143;
  var SettingsNotifyEvents = 0;
  var SettingsDesktopNotifs = 0;
  var SettingsAudioNotifs = 0;

  var time1 = 0; // time since last desktop notif
  
  var theme = "dark";
  var showEventToD = true; //Time of Day
  var showEventTuE = true; //Time until Event
  var showEventDNC = true; //Day-night cycle
  var VisibleEvents = ["Quick Maths","Dragon Egg","2x Rewards","Care Package","KOTL","KOTH","Auction","Giant Cake","All bounty","Squads","Beast","Pizza","Rage Pit","Spire","Robbery","Blockhead","Raffle","Team Deathmatch"];
  var AudioEvents = [];
  
  var praise_quotes = [`You're crazy.`,"So good brooke.","Cool but seek help please","Brookeafk.com so good","she's insane in the head","brooke your so smart in my opnion","brooke is such a good pit player","your site is fucking incredible","this is actually amazing wtf","brooke is awesome","great site, I get to see every event I love happen while I'm at school!","very simple and great colors","ty for ur amazing website &#10084;","best pit website","the site looks good.","brooke is poger","i lvoe bgorokecrazfft.com",`i find your website really useful, specially when i have the game closed`,"Your website is quite useful actually"]
  var praise_names = ["Andrew","Ellie","oSnapL","1Mad","Emma","catweapon","Twen","C4PS","vnmm","Vermasium","Stampy_fan2","swux","TheSKYeagle","julikabum","McPqndq","clouby","Brano","Ticha","Working"]
  var praise_urls = ["http://deviantart.com/hextant","https://twitter.com/ellwixd","https://twitter.com/oSnapLLL","https://youtu.be/dQw4w9WgXcQ","https://twitter.com/cutekitty271","https://namemc.com/profile/354aa68a43694ba29ff23c705dfc11e6","https://twitter.com/KinderFissa","https://twitter.com/c4pshypixel","https://vnmm.dev/","https://namemc.com/profile/9f65cdd1-81d7-49f3-8d41-fef76a7a8768","https://hypixel.net/members/probot.1901786/","https://www.tiktok.com/@swuxify_","https://twitter.com/leskyeagle","https://twitter.com/julikabum_0","https://pitpanda.rocks","https://brookeafk.com","https://twitter.com/branodon","https://pitpanda.rocks/players/18fe5844ce244d11ad3435c96435900f","https://twitter.com/WorkingMC"]
  //Note: Jojo's cock is seven inches (18cm) long. I've been forced to write this, unfortunately. Sorry that you had to read this.
  var AllSettings = ['visible','notifs','palette','timestamps','theme','flashing','reminder','desktop','audio']
  var event_sound = new Audio("event_arriving.mp3");
  event_sound.volume = 0.2;
  var ok_ids = []
  var WithoutVar = ""
  
  var events = ["Quick Maths","Dragon Egg","2x Rewards","Care Package","KOTL","KOTH","Auction","Giant Cake","All bounty","Squads","Beast","Pizza","Rage Pit","Spire","Robbery","Blockhead","Raffle","Team Deathmatch"]
  var eventsNoSpaces = ["QuickMaths","DragonEgg","2xRewards","CarePackage","KOTL","KOTH","Auction","GiantCake","Allbounty","Squads","Beast","Pizza","RagePit","Spire","Robbery","Blockhead","Raffle","TeamDeathmatch"]
  var trueEventColours = ["#FF55FF","#AA00AA","#00AA00","#FFAA00","#55FF55","#55FFFF","#FFFF55","#FF55FF","#FFAA00","#55FFFF","#55FF55","#FF5555","#FF5555","#AA00AA","#FFAA00","#5555FF","#FFAA00","#AA00AA"]
  var VisibilityLength = [15,90,240,30,180,240,30,120,15,480,480,480,420,480,420,480,480,480]
  var IsItACountdown = [`<span style="color: #ff55ff; font-family: minecraftbold;">QUICK MATHS!</span> <span style="color: #AAAAAA;">First 5 players to answer gain</span> <span style="color: #55ffff;">+250XP</span> <span style="color: #ffaa00;">+500g</span>`,`<span style="color: #ff55ff; font-family: minecraftbold;">MINOR EVENT!</span><br><span style="color: #aa00aa; font-family: minecraftbold;">DRAGON EGG</span><span style="color: #aaaaaa;"> in </span><span style="color: #ffff55; font-family: minecraftbold;">Pit Area</span>`,"yes",`<span style="color: #ff55ff; font-family: minecraftbold;">MINOR EVENT!</span><br><span style="color: #ffaa00; font-family: minecraftbold;">CARE PACKAGE</span><span style="color: #aaaaaa;"> in </span><span style="color: #ffff55; font-family: minecraftbold;">Pit Area</span>`,"yes","yes",`<span style="color: #ff55ff; font-family: minecraftbold;">MINOR EVENT!</span> <span style="color: #ffaa00; font-family: minecraftbold;">AUCTION!</span><br><span style="color: #AAAAAA; font-family: minecraftregular">Check auctioneer or chat!</span>`,"yes",`<span style="color: #ff55ff; font-family: minecraftbold;">MINOR EVENT!</span><br><span style="color: #ffAA00; font-family: minecraftbold;"> EVERYONE GETS A BOUNTY!</span>`,"yes","yes","yes","yes","yes","yes","yes","yes","yes"]
  var DemolitionTime = 15;
  var TimeOfEventStart = 0;
  
  //events that I know work: all bounty, dragon egg, 2x rewards, uh .,
  if(document.body.clientWidth < 800) {
    document.getElementById("brookeafk-com").innerText = "mobile website"
    document.getElementById("settings-ts-dnc").innerText = "Day-Night"
    document.getElementById("settings-ts-tue").innerText = "Until Event"
    document.getElementById("settings-flashing").innerText = "Flash: "
    console.log("Damn, that's a tiny screen. Better accomodate.")
    document.getElementById("current-event").setAttribute("id","replacement")
    document.getElementById("brookeafk-com").setAttribute("id","current-event")
    document.getElementById("replacement").setAttribute("id","brookeafk-com")
    document.getElementById("current-event").innerHTML = "brookeafk.com (mobile)"
    document.getElementById("brookeafk-com").innerHTML = ""
    document.getElementById("current-event").style.width = "200px"
    WithoutVar = "brookeafk.com"
  }
  
  document.getElementById('settings').style.color = NormalText;
  
  function MakeFunTimestamps(convertible) {
  let currentTime = (Date.now);
  if (convertible - currentTime() <= 0) {
    convertible = "Passed!"
  }
  if (convertible - currentTime() <= 60000) {
      convertible = (((Math.floor(((convertible - currentTime())*100))/100000).toFixed(2)) + "s");
  } else if (convertible - currentTime() <= 3600000) {
      convertible = ((Math.floor(((convertible - currentTime()))/60000) + "m" + (Math.floor(((convertible - currentTime()))/1000) % 60) + "s"));
  } else if (convertible - currentTime() > 1) {
      convertible = ((Math.floor(((convertible - currentTime()))/3600000) + "h" + (Math.floor(((convertible - currentTime()))/60000) % 60) + "m"));
  }
  
  return convertible;
  }
  
  function EventFlash(seconds) {
    window.EventFlashSec = seconds;
    if(DoesStuffExist == true) {
    for(var i = window.HiddenEventCount; i < EventsToLoad; i++) { 
      document.getElementById('event_'+ String(i)).classList.remove("blinktext-light");
      document.getElementById('event_'+ String(i)).classList.remove("blinktext-dark");
    }}
    if(seconds == 60) {
      document.getElementById('settings-flash-60').style.color = NormalText;
      document.getElementById('settings-flash-30').style.color = "#888888";
      document.getElementById('settings-flash-10').style.color = "#888888";
      document.getElementById('settings-flash-0').style.color = "#888888"; 
    }
    if(seconds == 30) {
      document.getElementById('settings-flash-30').style.color = NormalText;
      document.getElementById('settings-flash-60').style.color = "#888888";
      document.getElementById('settings-flash-10').style.color = "#888888";
      document.getElementById('settings-flash-0').style.color = "#888888"; 
    }
    if(seconds == 10) {
      document.getElementById('settings-flash-10').style.color = NormalText;
      document.getElementById('settings-flash-30').style.color = "#888888";
      document.getElementById('settings-flash-60').style.color = "#888888";
      document.getElementById('settings-flash-0').style.color = "#888888"; 
    }
    if(seconds == -10) {
      document.getElementById('settings-flash-0').style.color = NormalText;
      document.getElementById('settings-flash-30').style.color = "#888888";
      document.getElementById('settings-flash-10').style.color = "#888888";
      document.getElementById('settings-flash-60').style.color = "#888888"; 
    }
    
  }
  
  function DayNightCycle() { //OPTIMIZE THIS please add variable that's like "when the day is dark please do not call the svg again please"
  //I will not >:)
    let CurrentTime = Date.now();
    let DayTime = CurrentTime % 2160000/1000;
    if(DayTime < 1440) {
      //console.log("The day ends in " + (1440 - DayTime) + " seconds.")
      document.getElementById("day-night").innerHTML = (AboutMe((1440 - DayTime)*1000) + "&nbsp;");
      if(theme == "light") {
      document.getElementById("day-night-border").style.background = "#EDD368";
      } else if (theme == "dark") {
      document.getElementById("day-night-border").style.background = "rgb(67, 61, 35)";
      }
      document.getElementById('day-svg').innerHTML = `<path d="M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0 c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2 c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1 C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06 c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41 l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41 c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36 c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/>`
  
  } else {
      //console.log("The night ends in " + (2160 - DayTime) + " seconds.")
      document.getElementById("day-night").innerHTML = (AboutMe((2160 - DayTime)*1000) + "&nbsp;");
      if(theme == "light") {
      document.getElementById("day-night-border").style.background = "#25AACF";
      } else if (theme == "dark") {
      document.getElementById("day-night-border").style.background = "rgb(35, 35, 67)";
      }
      document.getElementById('day-svg').innerHTML = `<path d="M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36c-0.98,1.37-2.58,2.26-4.4,2.26 c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/>`
  }
  }
  
  function SetAudio(seconds) {
    window.NotifTimer = seconds;
    console.log("Notification timer set to " + NotifTimer + " seconds.")
    document.getElementById('anotif').style.display = "block"
    document.getElementById('dnotif').style.display = "block"
    if(seconds > 0) {
    for(var i = 0; i < 18; i++) {
      if(DoesStuffExist == true) {
      document.getElementById('notif-' + eventsNoSpaces[i]).style.display = "inline";
    }}
    if(window.AudioEvents.length == 0 && HasStuffLoaded == true) {
      console.log(window.AudioEvents + " audioevents")
     document.getElementById('alert-nobells').style.display = "block";
      }
    if(SettingsDesktopNotifs == 0 && SettingsAudioNotifs == 0) {
      document.getElementById('alert-notypes').style.display = "block"
    }
  }
    if(seconds == 300) {
      document.getElementById('audio-300').style.color = NormalText;
      document.getElementById('audio-180').style.color = "#888888";
      document.getElementById('audio-60').style.color = "#888888";
      document.getElementById('audio-0').style.color = "#888888"; 
    }
    if(seconds == 180) {
      document.getElementById('audio-180').style.color = NormalText;
      document.getElementById('audio-300').style.color = "#888888";
      document.getElementById('audio-60').style.color = "#888888";
      document.getElementById('audio-0').style.color = "#888888"; 
    }
    if(seconds == 60) {
      document.getElementById('audio-60').style.color = NormalText;
      document.getElementById('audio-180').style.color = "#888888";
      document.getElementById('audio-300').style.color = "#888888";
      document.getElementById('audio-0').style.color = "#888888"; 
    }
    if(seconds <= 0) {
      document.getElementById('audio-0').style.color = NormalText;
      document.getElementById('audio-180').style.color = "#888888";
      document.getElementById('audio-60').style.color = "#888888";
      document.getElementById('audio-300').style.color = "#888888"; 
      document.getElementById('anotif').style.display = "none"
      document.getElementById('dnotif').style.display = "none"
      document.getElementById('alert-nobells').style.display = "none";
      document.getElementById('alert-notypes').style.display = "none";
      for(var i = 0; i < 18; i++) {
        if(DoesStuffExist == true) {
        document.getElementById('notif-' + eventsNoSpaces[i]).style.display = "none";
      }}
      
    }
  
  }

  function ANotif(tog) {
    window.SettingsAudioNotifs = tog;
    console.log("Audio notifications setting: " + tog);
    if(tog == 1) {
      document.getElementById('audio-on').style.color = NormalText;
      document.getElementById('audio-off').style.color = "#888888";
      document.getElementById('alert-notypes').style.display = 'none';
    }
    if(tog == 0) {
      document.getElementById('audio-off').style.color = NormalText;
      document.getElementById('audio-on').style.color = "#888888";
      if(SettingsDesktopNotifs == 0 && NotifTimer > 0) {
        document.getElementById('alert-notypes').style.display = 'block';
      }
    }
  }


  function DNotif(tog) { //Short for "Desktop Notification" and "toggle"
    window.SettingsDesktopNotifs = tog;
    console.log("Desktop notifications setting: " + tog);
    if(tog == 1) {
      document.getElementById('desktop-on').style.color = NormalText;
      document.getElementById('desktop-off').style.color = "#888888";
      document.getElementById('alert-notypes').style.display = 'none';
                                            // Let's check if the browser supports notifications
                                            if (!("Notification" in window)) {
                                              document.getElementById('desktop-on').innerHTML = "Your browser doesn't support this!"
                                            }
                                            else if (Notification.permission === "denied") {
                                              document.getElementById('desktop-on').innerHTML = "Notifications denied :("
                                              window.SettingsDesktopNotifs = 0;
                                              tog = 0;
                                            }

                                            // Let's check whether notification permissions have already been granted
                                            else if (Notification.permission === "granted") {
                                              console.log("Notifications were already enabled!")
                                            }

                                            // Otherwise, we need to ask the user for permission
                                            else if (Notification.permission !== "denied") {
                                              document.getElementById('desktop-on').innerHTML = "Accept notifications!"
                                              Notification.requestPermission().then(function (permission) {
                                                // If the user accepts, let's create a notification
                                                if (permission === "granted") {
                                                  console.log("Notifications enabled!")
                                                  document.getElementById('desktop-on').innerHTML = "On"
                                                }
                                                else {
                                                  document.getElementById('desktop-on').innerHTML = "Notifications denied :("
                                                  window.SettingsDesktopNotifs = 0;
                                                  tog = 0;
                                                }
                                              });
                                            }
    }
    if(tog == 0) {
      document.getElementById('desktop-off').style.color = NormalText;
      document.getElementById('desktop-on').style.color = "#888888";
      if(SettingsAudioNotifs == 0 && NotifTimer > 0) {
        document.getElementById('alert-notypes').style.display = 'block';
      }
    }
  }
  
  function TestAudio() {
    event_sound.play();
    event_sound.currentTime = 0;
  }
  
  function ChangeTheme(themecolour) {
    window.theme = themecolour;
    console.log ("Changed theme to " + window.theme);
    if(themecolour == "light") {
      NormalText = "#000000";
      document.getElementById('settings-theme-dark').style.color = "#888888";
      document.getElementById('settings-theme-light').style.color = NormalText;
      document.body.style.background = "#FFFFFF";
      document.querySelectorAll('p').forEach(e => e.style.color = "black");
      document.getElementById('settings-theme-dark').classList.add("hand_cursor");
      document.getElementById('settings-theme-light').classList.remove("hand_cursor");
      document.getElementById('settings-palette-0').innerHTML = ("Default");
      document.getElementById('settings-palette-1').innerHTML = ("Sunset");
      document.getElementById('settings-palette-2').innerHTML = ("Beachside");
      document.getElementById('settings-palette-3').innerHTML = ("Bubblegum");
      document.getElementById('tut-notif').style.color = "#BD8E02"
    } else if (window.theme == "dark") {
      NormalText = "#FFFFFF";
      document.getElementById('settings-theme-light').style.color = "#888888";
      document.getElementById('settings-theme-dark').style.color = NormalText;
      document.body.style.background = "#222222";
      document.querySelectorAll('p').forEach(e => e.style.color = "white");
      document.getElementById('settings-theme-dark').classList.remove("hand_cursor");
      document.getElementById('settings-theme-light').classList.add("hand_cursor");
      document.getElementById('settings-palette-0').innerHTML = ("Default");
      document.getElementById('settings-palette-1').innerHTML = ("Sunrise");
      document.getElementById('settings-palette-2').innerHTML = ("Ocean");
      document.getElementById('settings-palette-3').innerHTML = ("Alpha");
      document.getElementById('tut-notif').style.color = "#FFFF80"
    }
    document.getElementById('day-svg').style.fill = NormalText;
    document.getElementById('settings').style.color = "#888888";
    if (DoesStuffExist == true) {
      EventFlash(window.EventFlashSec);
      SetAudio(window.NotifTimer);
      DNotif(window.SettingsDesktopNotifs);
      ANotif(window.SettingsAudioNotifs);
      console.log("Stuff exists. Updating event flashes and audio.");
    }
    for(var i = 1; i <= window.eventsNoSpaces.length; i++) {
      if(AudioEvents.includes(events[i - 1])) { //if the event is audible...
        document.getElementById('notif-'+ eventsNoSpaces[i - 1]).style.fill = NormalText;
      } else {
        document.getElementById('notif-'+ eventsNoSpaces[i - 1]).style.fill = "#888888";
      }
    }
    for(var i = 1; i <= window.eventsNoSpaces.length; i++) {	
      if(VisibleEvents.includes(events[i - 1])) { //if the event is visible...	
        document.getElementById('visible-'+ eventsNoSpaces[i - 1]).style.color = NormalText;	
      } else {	
        document.getElementById('visible-'+ eventsNoSpaces[i - 1]).style.color = "#888888";	
      }
    }
    if(themecolour == "light") {
    [...document.querySelectorAll('*')]
      .filter(el => getComputedStyle(el).color === 'rgb(255, 255, 255)')
      .forEach(el => el.style.color = '#000000')
    }
    if(themecolour == "dark") {
    [...document.querySelectorAll('*')]
      .filter(el => getComputedStyle(el).color === 'rgb(0, 0, 0)')
      .forEach(el => el.style.color = '#ffffff')
    }
  }
  
  ChangeTheme(theme); //It's called here to load the events in as black to begin with. I don't want to give people seizures.
  
  
  
  function ToggleTimestamps(timestamps) {
    if (timestamps == "tod") {
      if(window.showEventToD == true) {
        document.getElementById('settings-ts-tod').style.color = "#888888";
        window.showEventToD = false;
      } else {
        document.getElementById('settings-ts-tod').style.color = NormalText;
        window.showEventToD = true;
      }
    }
    if (timestamps == "tue") {
      if(window.showEventTuE == true) {
        document.getElementById('settings-ts-tue').style.color = "#888888";
        window.showEventTuE = false;
      } else {
        document.getElementById('settings-ts-tue').style.color = NormalText;
        window.showEventTuE = true;
      }
    }
    if (timestamps == "dnc") {
      if(window.showEventDNC == true) {
        document.getElementById('settings-ts-dnc').style.color = "#888888";
        window.showEventDNC = false;
        document.getElementById("day-night-border").style.display = "none";
      } else {
        document.getElementById('settings-ts-dnc').style.color = NormalText;
        window.showEventDNC = true;
        document.getElementById("day-night-border").style.display = "flex";
  
      }
    }
  }
  
  function ChangePalette(changeThePalette) {
    Palette = changeThePalette;
    document.getElementById('settings-palette-0').style.color = "#888888";
    document.getElementById('settings-palette-1').style.color = "#888888";
    document.getElementById('settings-palette-2').style.color = "#888888";
    document.getElementById('settings-palette-3').style.color = "#888888";
    document.getElementById('settings-palette-' + Palette).style.color = NormalText;
  }
  

  function SelectOnly(event_type) {
    if(event_type == "minor") {
    for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
        if (window.data[i]['type'] == "major") {
        document.getElementById('event_' + String(i)).style.display = "none";
        console.log("Major event hidden.");
        }
        if (window.data[i]['type'] == "minor") {
        document.getElementById('event_' + String(i)).style.display = "block";
        console.log("Minor event made visible.");
        }
        window.VisibleEvents = ["Quick Maths","Dragon Egg","2x Rewards","Care Package","KOTL","KOTH","Auction","Giant Cake","All bounty"];
        SettingsSelectedEvents = 511;
        document.getElementById('alert-noevents').style.display = "none";
      }
    } else if(event_type == "major") {
      for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
        if (window.data[i]['type'] == "minor") {
        document.getElementById('event_' + String(i)).style.display = "none";
        console.log("Minor event hidden.");
        }
        if (window.data[i]['type'] == "major") {
        document.getElementById('event_' + String(i)).style.display = "block";
        console.log("Major event made visible.");
        }
        window.VisibleEvents = ["Squads","Beast","Pizza","Rage Pit","Spire","Robbery","Blockhead","Raffle","Team Deathmatch"];
        SettingsSelectedEvents = 261632;
      }
      document.getElementById('alert-noevents').style.display = "none";
    } else if(event_type == "nothing") {
    window.VisibleEvents = [];
    window.AudioEvents = [];
    SettingsSelectedEvents = 0;
    SettingsNotifyEvents = 0;
    document.getElementById('alert-noevents').style.display = "block"
    if(NotifTimer > 0) {
        document.getElementById('alert-nobells').style.display = "block";
    }
  
    for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
        document.getElementById('event_' + String(i)).style.display = "none";
      }
    } else if(event_type == "everything") {
      window.VisibleEvents = ["Quick Maths","Dragon Egg","2x Rewards","Care Package","KOTL","KOTH","Auction","Giant Cake","All bounty","Squads","Beast","Pizza","Rage Pit","Spire","Robbery","Blockhead","Raffle","Team Deathmatch"]
      SettingsSelectedEvents = 262143;
      for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
        document.getElementById('event_' + String(i)).style.display = "block";
      }
      
      document.getElementById('alert-noevents').style.display = "none";
    }
    ChangeTheme(theme);
    console.log(SettingsSelectedEvents);
  }
  
  function GeneratePraise() {
    const randomElement = [Math.floor(Math.random() * (praise_quotes.length + 3)) - 3]; //adds slight bias to quote #0
    console.log(randomElement);
    if(randomElement <= -1) {
      randomElement[0] = 0;
    }
    return (`"` + praise_quotes[randomElement] + `" -<a href="` + praise_urls[randomElement] + `" target="_blank">` + praise_names[randomElement] + `</a>`);
  }
  
  function TimeOfDay(s) {
  var offset = (new Date().getTimezoneOffset())*-60000;
  return new Date(s + offset).toISOString().slice(-13, -8);
  }
  
  var lightColours0 = ["#D9D2E9","#E9D2E1","#D2E9DD","#E9E2D2","#D2E9D2","#D2E9E8","#E9DDD2","#E9D2D2","#E9E3D2","#8EBAEC","#8EEC94","#ECB38E","#EC8E8E","#EC8EEC","#ECE98E","#9191EC","#ECBD8E","#BA8EEC"]
  var darkColours0 = ["#45234f","#4f234d","#234f2c","#4f3023","#394f23","#234f48","#6e5032","#35234f","#4f4d23","#206dc5","#20c541","#c59f20","#c52320","#c520c3","#c5c320","#2323c5","#c0c020","#7320c5"]
  
  var lightColours2 = ["#FFAEBC","#E29CB4","#B4F8C8","#E4D4B4","#F1CBB0","#A0E7E5","#F4F4CC","#C5E3F2","#FBE7C6","#14C2DD","#C7F954","#FCC27C","#FF6F61","#64ABD1","#FDD55E","#5CB7D4","#EEB968","#81599F",]
  var darkColours2 = ["#003A61","#194475","#2E4180","#323275","#0E2F82","#305B8C","#315F82","#196B82","#02636E","#0ACF87","#2CB8AE","#219CD1","#438BDE","#1B96DE","#2BB5BA","#25AACF","#2D82D6","#4BD6B8",]
  var darkColours1 = ["#4F2561","#3D2C5C","#782C91","#8C3A81","#70287D","#504178","#402459","#AB1B7D","#661563","#DE8F10","#FA9E0A","#DB7821","#D19D49","#E84E3C","#E6C853","#ED7C2B","#CF8D32","#E3DD30",] 
  var lightColours1 = ["#F7E497","#E3DC7B","#D9C755","#EBC86A","#F7C997","#EDD368","#F2B583","#EDD09D","#EB8773","#AB419B","#C2619E","#D93FB7","#B83DB3","#E038A3","#C71C60","#D45BA1","#E84179","#E344E0",]
  var darkColours3 = ["#321433","#33142b","#143321","#332314","#1e3314","#143333","#332a14","#261433","#2f3314","#206dc5","#20c541","#c59f20","#c52320","#c520c3","#c5c320","#2323c5","#c0c020","#7320c5"]
  var lightColours3 = ["#FE9FBF","#F2C4CD","#ffaed7","#F2A2C0","#FF9DBB","#FF92B9","#ECAFB7","#FFC6DA","#FEA8C5","#D98FC5","#BF5AA4","#E68DCF","#E08FCA","#E884CC","#C15BA7","#E78CD1","#DC87BE","#CF6EB1"]
  
  const pp_url = ('https://events.mcpqndq.dev'); //stands for "Pit Panda"
  data_backup = MakeAPIAndHTML();
  getPitPanda();
  console.log("The data's been called!");
  setInterval(getPitPanda,40);
  
  async function MakeAPIAndHTML() { //Calls the API exactly once (thanks McPqndq for pointing out that i do not have to call apis more than once)
    const response = await fetch(pp_url);
    window.data = await response.json();
    window.data_backup = window.data;
    window.EventsToLoad = Object.keys(window.data).length
    console.log("Loading events: " + window.EventsToLoad);
    console.log("API Called.")
    for(var i = 0; i < window.EventsToLoad; i += 1) { //Make HTML elements
      var div = document.createElement("div");
      console.log("I made an element.");
      div.id = ("event_" + i);
      div.innerHTML = ("[loading event]");
      div.style.padding = "15px"; 
      div.style.backgroundColor = "#222222";
      div.style.textAlign = "left";
      div.style.fontSize = "1.5em"
      div.style.lineHeight = "100%"
     document.body.appendChild(div);
  
  }
    var o = document.createElement("p");
    o.id = "made_with_love";
    o.innerHTML = (`<span style="position:relative; left: 10px;">Made with love and tears by <a href="https://twitter.com/BrookeAFK" target="_blank" rel="noopener">BrookeAFK</a></span>`);
    document.body.appendChild(o);
  
    var p = document.createElement("p");
    console.log("Added footer.");
    //p.style.marginTop = (String(50*i) + "px")
    p.id = ("version")
    p.innerHTML = (`<span style="position:relative; left: 10px;">` + "v" + window.version_number + `</span>`);
    document.body.appendChild(p);
    var q = document.createElement("p");
    q.id = ("special_thanks")
   // q.style.marginTop = (String(50) + "px")
    q.innerHTML = (`<span style="position:relative; left: 10px;">` + GeneratePraise() + "</span>");
    document.body.appendChild(q);
    ChangeTheme(theme); //just again to make sure 
    //console.log("Seems like your screen's " + document.body.clientWidth + " pixels wide.");
    DoesStuffExist = true;
    URLToSettings()
  }
  
  function AudioChecker() {
    let currentTime = (Date.now);
    if(DoesStuffExist == true) {
    for(var i = window.HiddenEventCount; i <= window.HiddenEventCount + 3; i++) {
      if (window.AudioEvents.includes(window.data[i]['event'])  && window.data[i]['timestamp'] - currentTime() <= (NotifTimer * 1000 + 1000) && window.data[i]['timestamp'] - currentTime() >= (NotifTimer * 1000 - 1000)) {
      if(SettingsAudioNotifs == 1) {
      event_sound.play();
      }
      if(SettingsDesktopNotifs == 1) {
      if(Date.now() > time1 + 10000) { //if it's been more than 10 seconds since the last notification
      if (NotifTimer == 60) {
        var minute_s = "minute"
      } else {
        var minute_s = "minutes"
      }
      //—
      var notification = new Notification("", {body: "Hey— " + window.data[i]['event'] + " is starting in " + NotifTimer/60 + " " + minute_s +"!", icon: "3457688aa57c4d71ab9d22b04f9160db.png"});
      time1 = Date.now()
      }
      }
   }
  }}
  }
  
  function RapidFirst(transformation) { //this plops the stuff in the actual html page
  if (DoesStuffExist == true) {
    HasStuffLoaded = true; //looks like the stuff has loaded
    for(var i = window.HiddenEventCount; i <= window.HiddenEventCount; i++) { 
    if (showEventToD == true && showEventTuE == true) {
    document.getElementById('event_' + String(i)).innerHTML = (`<span style="font-family: minecraftregular">` + MakeFunTimestamps(transformation[i].timestamp) + `: </span><span> ` + transformation[i].event + `</span><span style="font-family: minecraftregular"> (` + TimeOfDay(transformation[i].timestamp) + ") </span>");
    } else if (showEventToD == false && showEventTuE == true) {
    document.getElementById('event_' + String(i)).innerHTML = (`<span style="font-family: minecraftregular">` + MakeFunTimestamps(transformation[i].timestamp) + `: </span><span> ` + transformation[i].event + `</span><span style="font-family: minecraftregular"> </span>`);
    } else if (showEventToD == true && showEventTuE == false) {
    document.getElementById('event_' + String(i)).innerHTML = (`<span style="font-family: minecraftregular">` + TimeOfDay(transformation[i].timestamp) + `: </span><span> ` + transformation[i].event + `</span><span style="font-family: minecraftregular"> </span>`);
    } else if (showEventToD == false && showEventTuE == false) {
    document.getElementById('event_' + String(i)).innerHTML = (`<span style="font-family: minecraftregular">` + transformation[i].event + `</span>`);
    }
    if(MakeFunTimestamps(transformation[i].timestamp) == "Passed!" && !!document.getElementById('event_' + String(i)) == true) {
      //document.getElementById('event_' + String(i)).remove();
      for(var j = 0; j <= i; j++) {
        document.getElementById('event_' + String(j)).style.display = "none"; //This should get rid of some bugs with events not hiding.
      }
      window.HiddenEventCount = window.HiddenEventCount + 1; 
      DemolitionTime = (window.data[HiddenEventCount - 1]['timestamp'] + (VisibilityLength[events.indexOf(window.data[HiddenEventCount - 1]['event'])]) * 1000)
      console.log(DemolitionTime);
      TimeOfEventStart = Date.now();
      console.log(TimeOfEventStart);
      document.getElementById("current-event").style.display = "block";
      document.getElementById('special_thanks').innerHTML = GeneratePraise()
    }
  }}
  }
  
  function UpdateEverything(transformation) { //this plops the stuff in the actual html page
    for(var i = window.HiddenEventCount + 1; i < EventsToLoad; i++) { 
    if (showEventToD == true && showEventTuE == true) {
    document.getElementById('event_' + String(i)).innerHTML = (`<span style="font-family: minecraftregular">` + MakeFunTimestamps(transformation[i].timestamp) + `: </span><span> ` + transformation[i].event + `</span><span style="font-family: minecraftregular"> (` + TimeOfDay(transformation[i].timestamp) + ") </span>");
    } else if (showEventToD == false && showEventTuE == true) {
    document.getElementById('event_' + String(i)).innerHTML = (`<span style="font-family: minecraftregular">` + MakeFunTimestamps(transformation[i].timestamp) + `: </span><span> ` + transformation[i].event + `</span><span style="font-family: minecraftregular"> </span>`);
    } else if (showEventToD == true && showEventTuE == false) {
    document.getElementById('event_' + String(i)).innerHTML = (`<span style="font-family: minecraftregular">` + TimeOfDay(transformation[i].timestamp) + `: </span><span> ` + transformation[i].event + `</span><span style="font-family: minecraftregular"> </span>`);
    } else if (showEventToD == false && showEventTuE == false) {
    document.getElementById('event_' + String(i)).innerHTML = (`<span>` + transformation[i].event + `</span>`);
    }
    if(MakeFunTimestamps(transformation[i].timestamp) == "Passed!" && !!document.getElementById('event_' + String(i)) == true) { //in an ideal world this should NEVER be called but js can be weird as hell sometimes
      //document.getElementById('event_' + String(i)).remove();
      document.getElementById('event_' + String(i)).style.display = "none";
      window.HiddenEventCount = window.HiddenEventCount + 1; 
      console.log("hey if you see this please let Brooke know as this should Not happen lol");
    }
   }
  }
  
  function VisibilityToggle(toggle) {
    if (window.VisibleEvents.includes(toggle)) {
      SettingsSelectedEvents = (SettingsSelectedEvents - Math.pow(2, window.events.indexOf(toggle)));
      const index = window.VisibleEvents.indexOf(toggle);
      if (index > -1) {
        window.VisibleEvents.splice(index, 1);
        document.getElementById('visible-' + toggle.replace(/\s/g, '')).style.color = "#888888";
      }
      for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
      if (window.data[i]["event"].includes(toggle)) {
        document.getElementById('event_' + String(i)).style.display = "none";
      }
      if(VisibleEvents.length == 0) {
    document.getElementById('alert-noevents').style.display = "block";
      }
    }
    } else {
      window.VisibleEvents.push(toggle);
      document.getElementById('visible-' + toggle.replace(/\s/g, '')).style.color = NormalText;
      SettingsSelectedEvents = (SettingsSelectedEvents + Math.pow(2, window.events.indexOf(toggle)));
      for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
      if (window.data[i]["event"].includes(toggle)) {
        document.getElementById('event_' + String(i)).style.display = "block";
      }
      }
      document.getElementById('alert-noevents').style.display = "none";

    }
    console.log("List of events that are visible:")
    console.log(window.VisibleEvents);
  }
  
  function URLToSettings() {
      let here = new URL(window.location.href);
      if(here.searchParams.get('reminder') == null || here.searchParams.get('flashing') == null || here.searchParams.get('palette') == null || here.searchParams.get('theme') == null || here.searchParams.get('timestamps') == null || here.searchParams.get('visible') == null || here.searchParams.get('notifs') == null || here.searchParams.get('desktop') == null) {
          console.log("No settings :fear:")
          ChangePalette(0);
           EventFlash(60); //setting everything up!
          SetAudio(-10);
          DNotif(0);
          ANotif(0);
      } else {
      NotifTimer = here.searchParams.get('reminder');
      EventFlashSec = here.searchParams.get('flashing');
      Palette = here.searchParams.get('palette')
      theme = here.searchParams.get('theme');
      showEventToD = here.searchParams.get('timestamps').charAt(0); //first character of "timestamps" in URL
      showEventTuE = here.searchParams.get('timestamps').charAt(1);
      showEventDNC = here.searchParams.get('timestamps').charAt(2);
      if (showEventDNC == false) {
        document.getElementById("day-night-border").style.display = "none";
      }
      SettingsSelectedEvents = parseInt(here.searchParams.get('visible'));
      SettingsNotifyEvents = parseInt(here.searchParams.get('notifs'));
      SettingsDesktopNotifs = parseInt(here.searchParams.get('desktop'));
      SettingsAudioNotifs = parseInt(here.searchParams.get('audio'))
  
      ChangePalette(Palette);
      SetAudio(parseInt(NotifTimer)); //this does not work //then WHY did you add it??
      EventFlash(window.EventFlashSec);
  
      if(window.showEventToD == 0) {
        document.getElementById('settings-ts-tod').style.color = "#888888";
      } else {
        document.getElementById('settings-ts-tod').style.color = NormalText;
      }
      if(window.showEventTuE == 0) {
        document.getElementById('settings-ts-tue').style.color = "#888888";
      } else {
        document.getElementById('settings-ts-tue').style.color = NormalText;
      }
      if(window.showEventDNC == 0) {
        document.getElementById('settings-ts-dnc').style.color = "#888888";
      } else {
        document.getElementById('settings-ts-dnc').style.color = NormalText;
      }
      VisibleEvents = [];
      AudioEvents = [];
      var leadingZeroes = (num, places) => String(num).padStart(places, '0')
      var number = here.searchParams.get('visible');

      if(number == "0") {
        document.getElementById('alert-noevents').style.display = "block";
      }
      var BinaryEvents = (leadingZeroes(parseInt(number).toString(2),events.length));
      console.log(BinaryEvents)
      for(i = 0; i < events.length; i++) {
          if(BinaryEvents.charAt(i) == "1") {
             VisibleEvents.push(events[(events.length - 1) - i]);
          }
      }    
      console.log(VisibleEvents);
  
      for(var i = 0; i < VisibleEvents.length; i++) {
      for(var j = window.HiddenEventCount; j < EventsToLoad; j++) {
      if (window.data[j]["event"].includes(VisibleEvents[i]) && !ok_ids.includes(j)) {
        document.getElementById('event_' + String(j)).style.display = "block";
        ok_ids.push(j);
        console.log(ok_ids)
          console.log("saved " + window.data[j]["event"])
      } 
      }}
      for(var j = window.HiddenEventCount; j < EventsToLoad; j++) {
      if (!ok_ids.includes(j)) {
      document.getElementById('event_' + String(j)).style.display = "none";
      console.log("hid " + window.data[j]["event"])
      }
  
      }
  
      var leadingZeroes = (num, places) => String(num).padStart(places, '0')
      var number = here.searchParams.get('notifs');
      var BinaryEvents = (leadingZeroes(parseInt(number).toString(2),events.length));
      console.log(BinaryEvents)
      for(i = 0; i < events.length; i++) {
          if(BinaryEvents.charAt(i) == "1") {
             AudioEvents.push(events[(events.length - 1) - i]);
          }
      } 
      console.log(AudioEvents);
      if(window.AudioEvents.length == 0 && DoesStuffExist == true) {
      console.log(window.AudioEvents + " audioevents")
     document.getElementById('alert-nobells').style.display = "block";
      }
  
  
  
      const queryString = window.location.search; //no clue what this does but i'm really scared to remove it
      ChangeTheme(theme);
      HasStuffLoaded = true;
      }
  }
  
  function NotifToggle(toggle) {
    if (window.AudioEvents.includes(toggle)) {
      SettingsNotifyEvents = (SettingsNotifyEvents - Math.pow(2, window.events.indexOf(toggle)));
      const index = window.AudioEvents.indexOf(toggle);
      if (index > -1) {
        window.AudioEvents.splice(index, 1);
        document.getElementById('notif-' + toggle.replace(/\s/g, '')).style.fill = "#888888";
      }
      if(window.AudioEvents.length == 0 && NotifTimer > 0) {
        document.getElementById('alert-nobells').style.display = "block";
      }
    } else {
      window.AudioEvents.push(toggle);
      document.getElementById('alert-nobells').style.display = "none";
      document.getElementById('notif-' + toggle.replace(/\s/g, '')).style.fill = NormalText;
      SettingsNotifyEvents = (SettingsNotifyEvents + Math.pow(2, window.events.indexOf(toggle)));
      for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
      }
  }
    console.log("List of events that a sound will play for:")
    console.log(window.AudioEvents);
  }
  
  function AboutMe(variable) {
      var date = new Date(null);
      date.setSeconds(variable / 1000);
      var endpoint = date.toISOString().substr(14, 5);
      return(endpoint); 
  }
  
  function CurrentEvent() {
    let currentTime = Date.now;
  
    if (HiddenEventCount > 0 && DemolitionTime - currentTime() >= 0) {
      var result = AboutMe(DemolitionTime - currentTime());
      console.log(result);
      let recentEventData = window.data[HiddenEventCount - 1];
      let correctColourCode =
        trueEventColours[events.indexOf(recentEventData["event"])];
      if (recentEventData["type"] == "major") {
        if (IsItACountdown[events.indexOf(recentEventData["event"])] == "yes") {
          console.log(DemolitionTime - currentTime());
          //console.log(((VisibilityLength[events.indexOf(window.data[HiddenEventCount - 1]['event'])]) * 1000) /* should return like "480000" (8m) in most cases */ - 180000)
          if (currentTime() >= 180000 + TimeOfEventStart) {
            document.getElementById("current-event").innerHTML =
              `<span style="color: #aa00aa; font-family: minecraftbold;">MAJOR EVENT!</span> <span style="color:` +
              correctColourCode +
              `; font-family: minecraftbold;">` +
              window.data[HiddenEventCount - 1]["event"].toUpperCase() +
              `!</span><br><span style="color: #aaaaaa;">Ending in <span style="color: #55ff55;">` +
              AboutMe(DemolitionTime - currentTime()) +
              `</span></span>`;
          } else {
            document.getElementById("current-event").innerHTML =
              `<span style="color: #aa00aa; font-family: minecraftbold;">MAJOR EVENT!</span> <span style="color:` +
              correctColourCode +
              `; font-family: minecraftbold;">` +
              window.data[HiddenEventCount - 1]["event"].toUpperCase() +
              `!</span><br><span style="color: #aaaaaa;">Starting in <span style="color: #55ff55;">` +
              AboutMe(TimeOfEventStart + 180000 - currentTime()) +
              `</span></span>`;
            console.log("major + countdown");
          }
        } else {
          document.getElementById("current-event").innerHTML =
            IsItACountdown[events.indexOf(recentEventData["event"])];
          console.log("bro??");
        }
      } else if (recentEventData["type"] == "minor") {
        if (IsItACountdown[events.indexOf(recentEventData["event"])] == "yes") {
          document.getElementById("current-event").innerHTML =
            `<span style="color: #ff55ff; font-family: minecraftbold;">MINOR EVENT!</span> <span style="color:` +
            correctColourCode +
            `; font-family: minecraftbold;">` +
            window.data[HiddenEventCount - 1]["event"].toUpperCase() +
            `!</span><br><span style="color: #aaaaaa;">Ending in <span style="color: #55ff55;">` +
            result +
            `</span></span>`;
          console.log("minor + countdown");
        } else {
          document.getElementById("current-event").innerHTML =
            IsItACountdown[events.indexOf(recentEventData["event"])];
          console.log("minor, no countdown");
        }
      }
    } else if (HiddenEventCount > 0 && DemolitionTime - currentTime() <= 0) {
      //document.getElementById("current-event").style.display = "none";
      document.getElementById("current-event").innerHTML = WithoutVar;
    }
  }
  
  function SettingsMenu() {
    if(settingsOpened == false) {
      document.getElementById('settings').style.color = "#888888";
      settingsOpened = true;
      document.getElementById('settings-section').style.display = "block";
      console.log("Settings opened.");
    } else if(settingsOpened == true) {
      document.getElementById('settings').style.color = NormalText;
      settingsOpened = false;
      console.log("Settings closed.");
      document.getElementById('settings-section').style.display = "none";
    }
    let here = new URL(window.location.href);
  
    console.log(here.searchParams.get('reminder'))
  
    
  }
  
  function SaveSettings() { 
      let here = new URL(window.location.href);
      for(i = 0; i < AllSettings.length; i++) {
      here.searchParams.delete(AllSettings[i]);
      }
  
      console.log(here);
      here.searchParams.append('theme', theme);
      here.searchParams.append('visible', SettingsSelectedEvents);
      here.searchParams.append('notifs', SettingsNotifyEvents);
      here.searchParams.append('palette', Palette);
      here.searchParams.append('timestamps', (showEventToD | 0).toString() + (showEventTuE | 0).toString() + (showEventDNC | 0).toString());
      here.searchParams.append('flashing', EventFlashSec);
      here.searchParams.append('reminder', NotifTimer);
      here.searchParams.append('desktop', SettingsDesktopNotifs);
      here.searchParams.append('audio', SettingsAudioNotifs);
  
      window.location = here; 
  }
  
  function CuteColors(conversion) { //adds cute colours
  if(window.theme == "light") {
    var TheRightArrayToFindTheColours = window["lightColours" + Palette];
  }
  if(window.theme == "dark") {
    var TheRightArrayToFindTheColours = window["darkColours" + Palette];
  }
  if(DoesStuffExist == true) {
  for(var i = window.HiddenEventCount; i < EventsToLoad; i++) { 
      document.getElementById('event_' + String(i)).style.backgroundColor = TheRightArrayToFindTheColours[events.indexOf(conversion[i]['event'])];
   if(conversion[i]['type'] == "major") {
    document.getElementById('event_' + String(i)).style.fontFamily = "minecraftbold";
   }
   document.getElementById('event_' + String(i)).style.color = NormalText;
   let currentTime = (Date.now);
   if ((conversion[i]['timestamp'] - currentTime() <= (EventFlashSec * 1000) && (conversion[i]['timestamp'] - currentTime()) % 1000 > 900) && (theme == "light")) {
    document.getElementById('event_'+ String(i)).classList.add("blinktext-light");
    document.getElementById('event_'+ String(i)).classList.remove("blinktext-dark");  
   }
   if ((conversion[i]['timestamp'] - currentTime() <= (EventFlashSec * 1000) && (conversion[i]['timestamp'] - currentTime()) % 1000 > 900) && (theme == "dark")) {
    document.getElementById('event_'+ String(i)).classList.add("blinktext-dark");
    document.getElementById('event_'+ String(i)).classList.remove("blinktext-light");
   }
  }}
  }
  
  function getPitPanda() {
    window.data = window.data_backup;
    counter = counter + 1;
    if (counter == 5) {
      counter = 0;
      UpdateEverything(window.data);
      console.log("Updated all values.")
      AudioChecker();
      CurrentEvent();
      DayNightCycle();
    }
    CuteColors(window.data);
    RapidFirst(window.data);
    
  }
    </script>
  
  <style>
    a:link {
      color: #B15AC2;
      background-color: transparent;
      text-decoration: none;
    }
    
    a:visited {
      color: #725279;
      background-color: transparent;
      text-decoration: none;
    }
    
    a:hover {
      color: #E7C2EE;
      background-color: transparent;
      text-decoration: underline;
    }
    
    a:active {
      color: #EDDDF0;
      background-color: transparent;
      text-decoration: underline;
    }
  
    p {
      font-size: 1.5em
    }
    
    .blinktext-light {
    -webkit-animation: blink-text-light 1000ms linear infinite;
    -moz-animation: blink-text-light 1000ms linear infinite;
    -ms-animation: blink-text-light 1000ms linear infinite;
    -o-animation: blink-text-light 1000ms linear infinite;
     animation: blink-text-light 1000ms linear infinite;
  }
  .blinktext-dark {
    -webkit-animation: blink-text-dark 1000ms linear infinite;
    -moz-animation: blink-text-dark 1000ms linear infinite;
    -ms-animation: blink-text-dark 1000ms linear infinite;
    -o-animation: blink-text-dark 1000ms linear infinite;
     animation: blink-text-dark 1000ms linear infinite;
  }
  .flashtext {
    -webkit-animation: flash-text 1000ms linear infinite;
    -moz-animation: flash-text 1000ms linear infinite;
    -ms-animation: flash-text 1000ms linear infinite;
    -o-animation: flash-text 1000ms linear infinite;
     animation: flash-text 1000ms linear infinite;
  }
  @keyframes blink-text-light {
    0% { color: #FF0000; opacity: 1; }
    10% { color: #e80000;opacity: 1; }
    15% { color: #d10000;opacity: 1; }
    20% { color: #b80000;opacity: 1; }
    25% { color: #a30000;opacity: 1; }
    30% { color: #8c0000;opacity: 1; }
    35% { color: #750000;opacity: 1; }
    40% { color: #5e0000;opacity: 1; }
    45% { color: #470000;opacity: 1; }
    49% { color: #300000;opacity: 1; }
    50% { color: #190000;opacity: 1; }
  }
  @keyframes blink-text-dark {
    0% { color: #c00000; opacity: 1; }
    10% { color: #c51a1a;opacity: 1; }
    15% { color: #ca3333;opacity: 1; }
    20% { color: #cf4d4d;opacity: 1; }
    25% { color: #d56666;opacity: 1; }
    30% { color: #da8080;opacity: 1; }
    35% { color: #e59999;opacity: 1; }
    40% { color: #eab3b3;opacity: 1; }
    45% { color: #f5cccc;opacity: 1; }
    49% { color: #fae6e6;opacity: 1; }
    50% { color: #ffffff;opacity: 1; }
  }
  @keyframes flash-text {
    0% { opacity: 1; }
    15% { opacity: 0.85; }
    33% { opacity: 0.7; }
    40% { opacity: 0.55; }
    46% { opacity: 0.4; }
    50% { opacity: 0.25; }
    54% { opacity: 0.4; }
    60% { opacity: 0.55; }
    67% { opacity: 0.7; }
    85% { opacity: 0.85; }
    100% { opacity: 1; }
  }
  .hand_cursor {
    cursor: pointer;
  }
  
  #settings-section {
    display: none;
    margin-left: 60px;
  }
  
  .unselectable {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
  }
    </style>
  
  <script defer src="https://static.cloudflareinsights.com/beacon.min.js/v652eace1692a40cfa3763df669d7439c1639079717194" integrity="sha512-Gi7xpJR8tSkrpF7aordPZQlW2DLtzUlZcumS8dMQjwDHEnw9I7ZLyiOj/6tZStRBGtGgN6ceN6cMH8z7etPGlw==" data-cf-beacon='{"rayId":"6ee9d8195eaa7e2c","version":"2021.12.0","r":1,"token":"7ae79fbdb6224da3a02aeec2ac9658a6","si":100}' crossorigin="anonymous"></script>
  </body>
  
  </html>
  